{"version":3,"sources":["engine/helpers.js","sockets/AllSockets.js","controls/NumControl.js","controls/StrControl.js","nodes/storage2pt0.js","nodes/splitter2pt0.js","nodes/merger2pt0.js","engine/material-ui-components.js","controls/ObjectDropControl.js","controls/ButtonBarControl.js","data/Items.js","nodes/miner2pt0.js","nodes/extractor2pt0.js","nodes/constructor2pt0.js","factorynodes/Smelter.js","nodes/foundary2pt0.js","nodes/assembler2pt0.js","nodes/Manufacturer2pt0.js","nodes/refinery2pt0.js","controls/OverclockControl.js","nodes/overclock2pt0.js","nodes/StarterNode.js","nodes/point2pt0.js","engine/dock.js","engine/ComponentStage.js","engine/ReteEngine.js","App.js","version.js","index.js"],"names":["setOutputMessage","node","editor","outputKey","itemPpm","outObj","a","showMaxOutput","thisNode","nodes","find","n","id","addon","formatNumber","message","name","outputs","get","update","setLabel","isInput","key","inputs","updateOutputLabel","recipeOutputObj","index","maxOutputPpm","actualOutPpm","recipeOutput","updateInputLabel","actualInpPpm","recipeReqPpm","recipeInputs","num","Number","isInteger","toFixed","determineIndex","current","maxIndex","itemSocket","rete","Socket","pipeSocket","anySocket","combineWith","numSocket","NumControl","emitter","readonly","component","initial","data","props","value","onChange","v","setValue","trigger","val","this","putData","Rete","Control","type","e","target","onPointerMove","stopPropagation","StrControl","size","Storage","StorageNode","addInput","Input","addControl","addOutput","Output","length","controls","Component","AdjustableNodePane","handleRotate","event","idx1","paneArray","findIndex","x","state","pane","idx2","positionArray","inPos","idx3","otPos","idx4","rotArray","rotAdj","idx5","nodeSizeArray","nodeSz","setState","iniState","undefined","propShare","rotationState","bind","setTimeout","window","rete_editor","view","updateConnections","nodeTitleClass","nodeLabel","bindSocket","bindControl","stateShare","selected","className","socket","io","innerRef","tabIndex","onKeyPress","style","margin","control","React","Node","Splitter","SplitterNode","itemName","outppm","nIn","nOut","getConnections","idx3_1","otPos1","idx3_2","otPos2","idx3_3","otPos3","width","height","paddingTop","paddingLeft","src","transform","alignSelf","pointerEvents","Merger","MergerNode","item","lengths","lgt","idx2_1","inPos1","idx2_2","inPos2","idx2_3","inPos3","backgroundColor","draggable","BlueButton","withStyles","theme","root","color","palette","getContrastText","blue","Button","ItemSelect","padding","borderRadius","transition","Select","ObjectDropControl","title","items","valueIn","onSelectChange","listItems","DynamicObjectSelect","handleChange","selectedValue","idx","i","options","map","MenuItem","display","autoWidth","ButtonBarControl","extraPadding","overlap","buttonToggled","buttonNotToggled","ButtonBar","currentTarget","buttonStyle","onClick","ButtonGroup","variant","CATS","STRUC","Item","category","ITEMS","IronOre","CopperOre","Limestone","CateriumOre","Coal","RawQuartz","Sulfur","Bauxite","SAM","Uranium","Water","CrudeOil","HeavyOil","Fuel","BioFuel","Turbofuel","Alumina","SulfuricAcid","Concrete","IronIngot","CopperIngot","CateriumIngot","SteelIngot","AluminumIngot","QuartzCrystal","Polymer","PetroleumCoke","AluminumScrap","Silica","BlackPowder","Wire","Cable","IronRod","Screw","IronPlate","ReinforcedIronPlate","CopperSheet","AluminumSheet","Plastic","Rubber","PackWater","SteelPipe","SteelBeam","EncasedIndustrialBeam","CrystalOscillator","Canister","Fabric","ModularFrame","HeavyModularFrame","Rotor","Stator","Motor","Quickwire","Circuit","Computer","AILimiter","HighSpeedConnector","Supercomputer","Battery","HeatSink","RadioControlUnit","TurboMotor","ElectromagneticControlRod","UraniumPellet","EncasedUraniumCell","Beacon","CompactedCoal","Leaves","Mycelia","Wood","Biomass","PackOil","PackHeavyOil","SolidBiofuel","PackFuel","PackBiofuel","PackTurbofuel","NuclearFuelRod","Nobelisk","Filter","ColorCartridge","Cartridge","SpikedRebar","IodineInfusedFilter","SmartPlating","VersatileFramework","AutomatedWiring","ModularEngine","AdaptiveControlUnit","Recipe","structure","matchInput","calculate","ppm","multiplier","finished","prc","position","ratio","percent","RIN","inp","RRP","AIP","Array","fill","ROT","out","MOP","PRC","matchObj","p","AOP","mop","Math","min","SmelterRecipes","FoundryRecipes","ConstructorRecipes","AssemblerRecipes","ManufacturerRecipes","RefineryRecipes","Biofuel","itemObjArray","Object","values","Miner","MinerNode","purity","minerLevel","ores","filter","ptyMulti","minMulti","pty","array","Extractor","ExtractorNode","dataType","conn","console","log","JSON","stringify","styleConnections","Constructor","ConstructorNode","multi","in1","calcObject","recipe","Smelter","SmelterNode","Foundry","FoundryNode","in2","Assembler","AssemblerNode","Manufacturer","ManufacturerNode","in3","in4","Refinery","RefineryNode","isAFluid","OverclockControl","max","Overclock","OverclockNode","ovc","Starter","StarterNode","ConnectionPoint","PointNode","marginTop","ComponentDock","componentArray","dataTransfer","setData","componentPlaceholders","comp","onDragStart","handleDrag","initialize","engine","components","c","register","dock","ReactDOM","render","document","querySelector","lz","require","fetch","then","r","text","fromJSON","parse","decompressFromEncodedURIComponent","Editor","createEditor","container","Engine","NodeEditor","use","ConnectionPlugin","ReactRenderPlugin","ConnectionPathPlugin","DEFAULT","curve","curveBundle","vertical","curvature","ContextMenuPlugin","searchBar","searchKeep","delay","classList","add","background","createElement","AreaPlugin","on","err","alert","output","abort","process","toJSON","points","connection","d","x1","y1","x2","y2","hx1","abs","hx2","addDropStrategy","resize","area","zoom","mainEditor","ref","addEventListener","preventDefault","getData","pointermove","createNode","mouse","addNode","y","SaveLoadComponent","currentEditorState","handleLoad","handleStore","handleRefresh","handleClear","compressToEncodedURIComponent","json","thisobj","thisJson","storedJson","rows","columns","DonateButton","action","App","nodeEditor","href","getElementById"],"mappings":"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","file":"static/js/main.b282a8df.chunk.js","sourcesContent":["\r\n\r\nexport async function setOutputMessage(node, editor, outputKey, itemPpm, outObj, showMaxOutput = true) {\r\n    const thisNode = editor.nodes.find(n => n.id === node.id);\r\n    var addon = \"\";\r\n    if(showMaxOutput){addon = \" of \" + formatNumber(outObj[1])};\r\n    const message = \"Out: (\" + formatNumber(itemPpm) + addon + \" \" + outObj[0].name + \"/min)\";\r\n    thisNode.outputs.get(outputKey).name = message;\r\n    await thisNode.update();\r\n}\r\n\r\nexport async function setLabel(node, editor, isInput, key, message){\r\n    const thisNode = editor.nodes.find(n => n.id === node.id);\r\n    if(isInput){\r\n        thisNode.inputs.get(key).name = message;\r\n    } else {\r\n        thisNode.outputs.get(key).name = message;\r\n    }\r\n    await thisNode.update();\r\n}\r\n\r\nexport async function updateOutputLabel(node,editor,key,recipeOutputObj,index, showMaxOutput = true){\r\n    const thisNode = editor.nodes.find(n => n.id === node.id);\r\n    var addon = \"\";\r\n    if(showMaxOutput){addon = \" of \" + formatNumber(recipeOutputObj.maxOutputPpm[index])};\r\n    const message = \"Out: (\" + formatNumber(recipeOutputObj.actualOutPpm[index]) + addon + \" \" + recipeOutputObj.recipeOutput[index] + \"/min)\";\r\n    thisNode.outputs.get(key).name = message;\r\n    await thisNode.update();\r\n}\r\n\r\nexport async function updateInputLabel(node,editor,key,recipeOutputObj,index){\r\n    const thisNode = editor.nodes.find(n => n.id === node.id);\r\n    const message = \"In: (\" + formatNumber(recipeOutputObj.actualInpPpm[index]) + \" of \" + formatNumber(recipeOutputObj.recipeReqPpm[index]) + \" \" + recipeOutputObj.recipeInputs[index] + \"/min)\";\r\n    thisNode.inputs.get(key).name = message;\r\n    await thisNode.update();\r\n}\r\n\r\nexport async function setInputMessage(node, editor, inputKey, itemPpm, reqObj) {\r\n    const thisNode = editor.nodes.find(n => n.id === node.id);\r\n    const message = \"In: (\" + formatNumber(itemPpm) + \" of \" + formatNumber(reqObj[1]) + \" \" + reqObj[0] + \"/min)\";\r\n    thisNode.inputs.get(inputKey).name = message;\r\n    await thisNode.update();\r\n}\r\n\r\nexport const dataTypes = {\r\n    ITEM: \"item\",\r\n    FLUID: \"fluid\",\r\n    OVC: \"ovc\",\r\n}\r\n\r\nexport function styleConnections(node,editor,key,dataType){\r\n    const thisNode = editor.nodes.find(n => n.id === node.id);\r\n    const conn = thisNode.getConnections();\r\n    console.log(JSON.stringify(conn));\r\n}\r\n\r\n\r\nfunction formatNumber(num){\r\n    if(Number.isInteger(num)){\r\n        return num.toFixed(0);\r\n    } else {\r\n        return num.toFixed(1);\r\n    }\r\n}\r\n\r\nexport function mapToRequirement(inputItem, recipes, idx, nInputs) {\r\n    var reqArray;\r\n    switch (nInputs) {\r\n        case 2:\r\n            reqArray = [recipes.in[idx], recipes.in2[idx]];\r\n            break;\r\n        case 4:\r\n            reqArray = [recipes.in[idx], recipes.in2[idx], recipes.in3[idx], recipes.in4[idx]];\r\n            break;\r\n        default:\r\n            reqArray = [recipes.in[idx], recipes.in2[idx]];\r\n            break;\r\n    }\r\n\r\n    var position = reqArray.findIndex(req => req === inputItem); // returns -1 if no match\r\n\r\n    var reqItem;\r\n    var reqPpm;\r\n    switch (position) {\r\n        case 0:\r\n            reqItem = recipes.in[idx];\r\n            reqPpm = recipes.inppm[idx];\r\n            break;\r\n        case 1:\r\n            reqItem = recipes.in2[idx];\r\n            reqPpm = recipes.inppm2[idx];\r\n            break;\r\n        case 2:\r\n            reqItem = recipes.in3[idx];\r\n            reqPpm = recipes.inppm3[idx];\r\n            break;\r\n        case 3:\r\n            reqItem = recipes.in4[idx];\r\n            reqPpm = recipes.inppm4[idx];\r\n            break;\r\n        default:\r\n            break;\r\n    }\r\n\r\n    return {position: position, reqItem: reqItem, reqPpm: reqPpm};\r\n\r\n}\r\n\r\nexport function mapToRequirement2(inputItem,recipes,idx){\r\n    var reqArray;\r\n    var ppmArray;\r\n    for(var i=0;i<recipes.in[idx].length;i++){\r\n        reqArray[i] = recipes.in[idx][i][0];\r\n        ppmArray[i] = recipes.in[idx][i][1];\r\n    }\r\n    var position = reqArray.findIndex(req => req === inputItem); // returns -1 if no match\r\n\r\n    return {position:position, reqItem:reqArray[position], reqPpm:ppmArray[position]};\r\n}\r\n\r\n\r\n//readTextFile(\"file:///C:/your/path/to/file.txt\");\r\n//readTextFile('Properties/version.txt');\r\nexport function readTextFile(file)\r\n{\r\n    var rawFile = new XMLHttpRequest();\r\n    rawFile.open(\"GET\", file, true);\r\n    rawFile.onreadystatechange = function ()\r\n    {\r\n        if(rawFile.readyState === 4)\r\n        {\r\n            if(rawFile.status === 200 || rawFile.status === 0)\r\n            {\r\n                var allText = rawFile.responseText;\r\n                alert(allText);\r\n            }\r\n        }\r\n    }\r\n    rawFile.send(null);\r\n}\r\n\r\nexport function determineIndex(current,maxIndex){\r\n    return current >= maxIndex ? current - maxIndex : current;\r\n}","import rete from 'rete'\r\n\r\nconst itemSocket = new rete.Socket('item');\r\nconst pipeSocket = new rete.Socket('pipe');\r\nconst anySocket = new rete.Socket('any');\r\nanySocket.combineWith(itemSocket);\r\nanySocket.combineWith(pipeSocket);\r\npipeSocket.combineWith(anySocket);\r\nitemSocket.combineWith(anySocket);\r\nexport const numSocket = new rete.Socket('number');\r\nexport const strSocket = new rete.Socket('string');\r\nexport {itemSocket};\r\nexport {pipeSocket};\r\nexport {anySocket};\r\n","import React from \"react\";\r\nimport Rete from \"rete\";\r\n\r\n\r\nexport class NumControl extends Rete.Control {\r\n    static component = ({ value, onChange }) => (\r\n        <span>PPM:&nbsp;<input\r\n            type=\"number\"\r\n            value={value}\r\n            onChange={e => onChange(+e.target.value)}\r\n            onPointerMove={e => e.stopPropagation()}\r\n        /></span>\r\n    );\r\n\r\n    constructor(emitter, key, node, readonly = false) {\r\n        super(key);\r\n        this.emitter = emitter;\r\n        this.key = key;\r\n        this.component = NumControl.component;\r\n\r\n        const initial = node.data[key] || 0;\r\n\r\n        node.data[key] = initial;\r\n        this.props = {\r\n            readonly,\r\n            value: initial,\r\n            onChange: v => {\r\n                this.setValue(v);\r\n                this.emitter.trigger(\"process\");\r\n            }\r\n        };\r\n    }\r\n\r\n    setValue(val) {\r\n        this.props.value = val+'';\r\n        this.putData(this.key, val);\r\n        this.update();\r\n    }\r\n\r\n}","import React from \"react\";\r\nimport Rete from \"rete\";\r\n\r\nexport class StrControl extends Rete.Control {\r\n    static component = ({ value, onChange }) => (\r\n        <span> \r\n            Item:&nbsp;<input\r\n            type=\"text\"\r\n            value={value}\r\n            size = \"12\"\r\n            onChange={e => onChange(e.target.value)}\r\n            onPointerMove={e => e.stopPropagation()}\r\n        />\r\n        </span>\r\n    );\r\n\r\n    constructor(emitter, key, node, readonly = false) {\r\n        super(key);\r\n        this.emitter = emitter;\r\n        this.key = key;\r\n        this.component = StrControl.component;\r\n\r\n        const initial = node.data[key] || 'No Data';\r\n\r\n        node.data[key] = initial;\r\n        this.props = {\r\n            readonly,\r\n            value: initial,\r\n            onChange: v => {\r\n                this.setValue(v);\r\n                this.emitter.trigger(\"process\");\r\n            }\r\n        };\r\n    }\r\n\r\n    setValue(val) {\r\n        this.props.value = val;\r\n        this.putData(this.key, val);\r\n        this.update();\r\n    }\r\n}","import React from 'react'\r\n//Rete\r\nimport Rete from \"rete\";\r\nimport { Node, Socket, Control } from 'rete-react-render-plugin';\r\nimport {determineIndex} from '../engine/helpers';\r\n//Sockets and Controls\r\nimport {anySocket} from '../sockets/AllSockets'\r\nimport {NumControl} from '../controls/NumControl'\r\nimport {StrControl} from '../controls/StrControl'\r\n\r\nexport class Storage extends Rete.Component {\r\n    constructor() {\r\n        super('Storage')\r\n        this.data.component = StorageNode;\r\n    }\r\n\r\n    builder(node) {\r\n        node.addInput(new Rete.Input(\"i1\",\"Input\",anySocket));\r\n        node.addControl(new StrControl(this.editor,\"item\",node,true));\r\n        node.addControl(new NumControl(this.editor,\"num\",node,true));\r\n        node.addOutput(new Rete.Output('o1','Output',anySocket));\r\n        return node;\r\n    }\r\n\r\n    worker(node,inputs,outputs) {\r\n        \r\n        outputs['o1'] = inputs['i1'].length ? inputs['i1'][0] : [null,0];\r\n        const thisNode = this.editor.nodes.find(n => n.id === node.id);\r\n        if(inputs['i1'].length) {\r\n            thisNode.controls.get('item').setValue(inputs['i1'][0][0].name);\r\n            thisNode.controls.get('num').setValue(inputs['i1'][0][1]);\r\n        } else {\r\n            thisNode.controls.get('item').setValue('<NO INPUT>');\r\n            thisNode.controls.get('num').setValue(0);\r\n        }\r\n    }\r\n}\r\n\r\nclass AdjustableNodePane extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.rotArray = [\"rotate(0deg)\", \"rotate(90deg)\", \"rotate(180deg)\", \"rotate(270deg)\",]\r\n        this.paneArray = [\"lrpane\",\"udpane\"];\r\n        this.nodeSizeArray = [\"sto-lr\",\"sto-ud\"];\r\n        this.positionArray = [\"left-socket\",\"top-socket\",\"right-socket\",\"bottom-socket-sto\"];\r\n        //this.state = { transform: this.stateArray[0], }\r\n        var iniState = this.props.propShare.node.data.rotationState === undefined ? 0 : this.props.propShare.node.data.rotationState;\r\n\r\n        this.state = {\r\n            pane: this.paneArray[determineIndex(0+iniState,this.paneArray.length)],\r\n            inPos: this.positionArray[determineIndex(0+iniState,this.positionArray.length)],\r\n            otPos: this.positionArray[determineIndex(2+iniState,this.positionArray.length)],\r\n            rotAdj: this.rotArray[determineIndex(0+iniState,this.rotArray.length)],\r\n            nodeSz: this.nodeSizeArray[determineIndex(0+iniState,this.nodeSizeArray.length)],\r\n        }\r\n        //this.stateArray = [\"0px\",\"20px\"];\r\n        //this.state = {margin: this.stateArray[0]};\r\n        this.handleRotate = this.handleRotate.bind(this);\r\n    }\r\n    // The problem is that this component cannot be clicked because it is behind the content pane\r\n    // So there needs to be another way to invoke this method from within this pane... hmm\r\n    // One way around that problem is to increase the scope of this class to include the content pane as well\r\n    //  Then the class will have direct access to the same pane that the user does, so it should be possible to invoke the method successfully.\r\n    handleRotate = (event) => {\r\n        if (event.key === 'r') {\r\n            //var idx = this.stateArray.findIndex((x) => x === this.state.transform);\r\n            //var idx = this.stateArray.findIndex((x)=>x===this.state.margin);\r\n            //alert(idx);\r\n            var idx1 = this.paneArray.findIndex((x)=> x===this.state.pane);\r\n            idx1 = idx1 === this.paneArray.length - 1 ? 0 : ++idx1;\r\n\r\n            var idx2 = this.positionArray.findIndex((x)=> x===this.state.inPos);\r\n            idx2 = idx2 === this.positionArray.length - 1 ? 0 : ++idx2;\r\n\r\n            var idx3 = this.positionArray.findIndex((x)=> x===this.state.otPos);\r\n            idx3 = idx3 === this.positionArray.length - 1 ? 0 : ++idx3;\r\n\r\n            var idx4 = this.rotArray.findIndex((x)=> x===this.state.rotAdj);\r\n            idx4 = idx4 === this.rotArray.length - 1 ? 0 : ++idx4;\r\n\r\n            var idx5 = this.nodeSizeArray.findIndex((x)=> x===this.state.nodeSz);\r\n            idx5 = idx5 === this.nodeSizeArray.length - 1 ? 0 : ++idx5;\r\n\r\n            this.setState({\r\n                pane: this.paneArray[idx1],\r\n                inPos: this.positionArray[idx2],\r\n                otPos: this.positionArray[idx3],\r\n                rotAdj: this.rotArray[idx4],\r\n                nodeSz: this.nodeSizeArray[idx5],\r\n            });\r\n            //alert(this.stateArray[idx])\r\n            //this.setState({margin: this.stateArray[idx]});\r\n        }\r\n    }\r\n    \r\n    componentDidUpdate() {\r\n        //console.log(JSON.stringify(window.rete_editor))\r\n        try {\r\n            setTimeout(() => {\r\n                let node = this.props.propShare.node;\r\n                window.rete_editor.view.updateConnections({ node });\r\n                var idx4 = this.rotArray.findIndex((x)=> x===this.state.rotAdj);\r\n                node.data.rotationState = idx4;\r\n            }, 1000);\r\n\r\n        } catch {\r\n            return;\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const nodeTitleClass = this.props.nodeTitleClass;\r\n        const nodeLabel = this.props.nodeLabel;\r\n        const { node, bindSocket, bindControl } = this.props.propShare;\r\n        const { outputs, controls, inputs, selected } = this.props.stateShare;\r\n        return (\r\n            <div className={\"node-pane \"+this.state.nodeSz}>\r\n                <div className={\"socket-pane \"+this.state.pane}>\r\n                    <div className={this.state.inPos}>\r\n                        <Socket\r\n                            type=\"input\"\r\n                            socket={inputs[0].socket}\r\n                            io={inputs[0]}\r\n                            innerRef={bindSocket}\r\n                        />\r\n                        \r\n                    </div>\r\n                </div>\r\n                <div className={\"socket-pane \"+this.state.pane}>\r\n                    <div className={this.state.otPos}>\r\n                        <Socket\r\n                            type=\"output\"\r\n                            socket={outputs[0].socket}\r\n                            io={outputs[0]}\r\n                            innerRef={bindSocket}\r\n                        />\r\n                    </div>\r\n                </div>\r\n                <div className=\"content-pane\" tabIndex=\"0\" onKeyPress={this.handleRotate} style={{margin:\"4%\"}}>\r\n                    <div className={nodeTitleClass + \" ti-grad title-pane\"}>\r\n                        <div className=\"two-letter-label\">&nbsp;{nodeLabel}</div>\r\n                        {node.name}\r\n                    </div>\r\n                    <div className=\"label-pane\">\r\n                        <div className=\"label\">\r\n                            <Control\r\n                                className=\"control\"\r\n                                key={controls[0].key}\r\n                                control={controls[0]}\r\n                                innerRef={bindControl}\r\n                            />\r\n                        </div>\r\n                        <div className=\"label\">\r\n                            <Control\r\n                                className=\"control\"\r\n                                key={controls[1].key}\r\n                                control={controls[1]}\r\n                                innerRef={bindControl}\r\n                            />\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport class StorageNode extends Node {\r\n    nodeTitleClass = \"title-logistics\";\r\n    nodeLabel = \"St\";\r\n    render() {\r\n        //tabIndex=\"0\" onKeyDown={(e) => this.handleRotate(e)}   <-- this is how you can get a div to take focus and respond to events\r\n        return (\r\n            <AdjustableNodePane propShare={this.props} stateShare={this.state} nodeTitleClass={this.nodeTitleClass} nodeLabel={this.nodeLabel}/>\r\n        );\r\n    }\r\n}","import React from 'react'\r\n//Rete\r\nimport Rete from \"rete\";\r\nimport { updateOutputLabel, determineIndex } from '../engine/helpers'\r\nimport { Node, Socket } from 'rete-react-render-plugin';\r\n//Sockets and Controls\r\nimport { anySocket } from '../sockets/AllSockets'\r\n\r\nexport class Splitter extends Rete.Component {\r\n    constructor() {\r\n        super('Splitter')\r\n        this.data.component = SplitterNode;\r\n    }\r\n\r\n    builder(node) {\r\n        node.addOutput(new Rete.Output(\"o1\", \"Output-1\", anySocket, false));\r\n        node.addOutput(new Rete.Output(\"o2\", \"Output-2\", anySocket, false));\r\n        node.addOutput(new Rete.Output(\"o3\", \"Output-3\", anySocket, false));\r\n        node.addInput(new Rete.Input(\"i1\", \"Input\", anySocket, false));\r\n\r\n        return node;\r\n    }\r\n\r\n    worker(node, inputs, outputs) {\r\n        const thisNode = this.editor.nodes.find(n => n.id === node.id);\r\n        const nIn = inputs['i1'].length ? 1 : 0;\r\n        const nOut = thisNode.getConnections().length - nIn;\r\n        var itemName;\r\n        var outppm;\r\n        if (nIn) {\r\n            if (nOut > 0) {\r\n                outppm = inputs['i1'][0][1] / nOut;\r\n            } else {\r\n                outppm = inputs['i1'][0][1];\r\n            }\r\n            outputs['o1'] = [inputs['i1'][0][0], outppm];\r\n            outputs['o2'] = [inputs['i1'][0][0], outppm];\r\n            outputs['o3'] = [inputs['i1'][0][0], outppm];\r\n            itemName = inputs['i1'][0][0].name;\r\n        } else {\r\n            outputs['o1'] = [null, 0];\r\n            outputs['o2'] = [null, 0];\r\n            outputs['o3'] = [null, 0];\r\n            itemName = \"N/A\"\r\n            outppm = 0;\r\n        }\r\n\r\n        updateOutputLabel(node, this.editor, 'o1', {\r\n            recipeOutput: [itemName],\r\n            maxOutputPpm: [0],\r\n            actualOutPpm: [outppm],\r\n        }, 0, false);\r\n        //setOutputMessage(node,this.editor,'o1',inputs['i1'][0][1] / nOut,[inputs['i1'][0][0].name,0],false);\r\n    }\r\n}\r\n\r\nclass AdjustableNodePane extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.rotArray = [\"rotate(0deg)\", \"rotate(90deg)\", \"rotate(180deg)\", \"rotate(270deg)\",]\r\n        this.paneArray = [\"lrpane\", \"udpane\"];\r\n        this.positionArray = [\"left-socket\", \"top-socket\", \"right-socket\", \"bottom-socket\"];\r\n\r\n        var iniState = this.props.propShare.node.data.rotationState === undefined ? 0 : this.props.propShare.node.data.rotationState;\r\n        //this.state = { transform: this.stateArray[0], }\r\n        this.state = {\r\n            pane: this.paneArray[determineIndex(iniState+0,this.paneArray.length)],\r\n            inPos: this.positionArray[determineIndex(iniState+0,this.positionArray.length)],\r\n            otPos1: this.positionArray[determineIndex(iniState+1,this.positionArray.length)],\r\n            otPos2: this.positionArray[determineIndex(iniState+2,this.positionArray.length)],\r\n            otPos3: this.positionArray[determineIndex(iniState+3,this.positionArray.length)],\r\n            rotAdj: this.rotArray[determineIndex(iniState+0,this.rotArray.length)],\r\n        }\r\n        //this.stateArray = [\"0px\",\"20px\"];\r\n        //this.state = {margin: this.stateArray[0]};\r\n        this.handleRotate = this.handleRotate.bind(this);\r\n    }\r\n    // The problem is that this component cannot be clicked because it is behind the content pane\r\n    // So there needs to be another way to invoke this method from within this pane... hmm\r\n    // One way around that problem is to increase the scope of this class to include the content pane as well\r\n    //  Then the class will have direct access to the same pane that the user does, so it should be possible to invoke the method successfully.\r\n    handleRotate = (event) => {\r\n        if (event.key === 'r') {\r\n            //var idx = this.stateArray.findIndex((x) => x === this.state.transform);\r\n            //var idx = this.stateArray.findIndex((x)=>x===this.state.margin);\r\n            //alert(idx);\r\n            var idx1 = this.paneArray.findIndex((x) => x === this.state.pane);\r\n            idx1 = idx1 === this.paneArray.length - 1 ? 0 : ++idx1;\r\n\r\n            var idx2 = this.positionArray.findIndex((x) => x === this.state.inPos);\r\n            idx2 = idx2 === this.positionArray.length - 1 ? 0 : ++idx2;\r\n\r\n            var idx3_1 = this.positionArray.findIndex((x) => x === this.state.otPos1);\r\n            idx3_1 = idx3_1 === this.positionArray.length - 1 ? 0 : ++idx3_1;\r\n            var idx3_2 = this.positionArray.findIndex((x) => x === this.state.otPos2);\r\n            idx3_2 = idx3_2 === this.positionArray.length - 1 ? 0 : ++idx3_2;\r\n            var idx3_3 = this.positionArray.findIndex((x) => x === this.state.otPos3);\r\n            idx3_3 = idx3_3 === this.positionArray.length - 1 ? 0 : ++idx3_3;\r\n\r\n            var idx4 = this.rotArray.findIndex((x) => x === this.state.rotAdj);\r\n            idx4 = idx4 === this.rotArray.length - 1 ? 0 : ++idx4;\r\n\r\n            this.setState({\r\n                pane: this.paneArray[idx1],\r\n                inPos: this.positionArray[idx2],\r\n                otPos1: this.positionArray[idx3_1],\r\n                otPos2: this.positionArray[idx3_2],\r\n                otPos3: this.positionArray[idx3_3],\r\n                rotAdj: this.rotArray[idx4],\r\n            });\r\n            //alert(this.stateArray[idx])\r\n            //this.setState({margin: this.stateArray[idx]});\r\n        }\r\n    }\r\n\r\n    componentDidUpdate() {\r\n        //console.log(JSON.stringify(window.rete_editor))\r\n        try {\r\n            setTimeout(() => {\r\n                let node = this.props.propShare.node;\r\n                window.rete_editor.view.updateConnections({ node });\r\n                var idx4 = this.rotArray.findIndex((x)=> x===this.state.rotAdj);\r\n                node.data.rotationState = idx4;\r\n            }, 1000);\r\n\r\n        } catch {\r\n            return;\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const nodeTitleClass = this.props.nodeTitleClass;\r\n        const nodeLabel = this.props.nodeLabel;\r\n        const { node, bindSocket, bindControl } = this.props.propShare;\r\n        const { outputs, controls, inputs, selected } = this.props.stateShare;\r\n        return (\r\n            <div className=\"node-pane\" style={{ width: \"100px\", height: \"100px\" }}>\r\n                <div className={\"socket-pane \" + this.state.pane}>\r\n                    <div className={this.state.inPos}>\r\n                        <Socket\r\n                            type=\"input\"\r\n                            socket={inputs[0].socket}\r\n                            io={inputs[0]}\r\n                            innerRef={bindSocket}\r\n                        />\r\n                    </div>\r\n                </div>\r\n                <div className={\"socket-pane \" + this.state.pane}>\r\n                    <div className={this.state.otPos1}>\r\n                        <Socket\r\n                            type=\"output\"\r\n                            socket={outputs[0].socket}\r\n                            io={outputs[0]}\r\n                            innerRef={bindSocket}\r\n                        />\r\n                    </div>\r\n                </div>\r\n                <div className={\"socket-pane \" + this.state.pane}>\r\n                    <div className={this.state.otPos2}>\r\n                        <Socket\r\n                            type=\"output\"\r\n                            socket={outputs[1].socket}\r\n                            io={outputs[1]}\r\n                            innerRef={bindSocket}\r\n                        />\r\n                    </div>\r\n                </div>\r\n                <div className={\"socket-pane \" + this.state.pane}>\r\n                    <div className={this.state.otPos3}>\r\n                        <Socket\r\n                            type=\"output\"\r\n                            socket={outputs[2].socket}\r\n                            io={outputs[2]}\r\n                            innerRef={bindSocket}\r\n                        />\r\n                    </div>\r\n                </div>\r\n                <div className=\"content-pane\" tabIndex=\"0\" onKeyPress={this.handleRotate}>\r\n                    <div className=\"label-pane\" style={{paddingTop: \"5px\", paddingLeft: \"0px\" }}>\r\n                        <img src=\"./resources/arrow.png\" width=\"80px\" height=\"80px\" style={{ transform: this.state.rotAdj, alignSelf: \"center\", pointerEvents:\"none\"}} />\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport class SplitterNode extends Node {\r\n    nodeTitleClass = \"title-producer\";\r\n    nodeLabel = \"Co\";\r\n    render() {\r\n        //tabIndex=\"0\" onKeyDown={(e) => this.handleRotate(e)}   <-- this is how you can get a div to take focus and respond to events\r\n        return (\r\n            <AdjustableNodePane propShare={this.props} stateShare={this.state} nodeTitleClass={this.nodeTitleClass} nodeLabel={this.nodeLabel} />\r\n        );\r\n    }\r\n}","\r\nimport React from 'react'\r\n// Rete\r\nimport Rete from \"rete\";\r\nimport { updateOutputLabel, determineIndex } from '../engine/helpers'\r\nimport { Node, Socket } from 'rete-react-render-plugin';\r\n//Sockets and Controls\r\nimport { anySocket } from '../sockets/AllSockets'\r\n\r\nexport class Merger extends Rete.Component {\r\n    constructor() {\r\n        super('Merger')\r\n        this.data.component = MergerNode;\r\n    }\r\n\r\n    builder(node) {\r\n        node.addOutput(new Rete.Output(\"o1\", \"Output-1\", anySocket, false));\r\n\r\n        node.addInput(new Rete.Input(\"i1\", \"Input-1\", anySocket, false));\r\n        node.addInput(new Rete.Input(\"i2\", \"Input-2\", anySocket, false));\r\n        node.addInput(new Rete.Input(\"i3\", \"Input-3\", anySocket, false));\r\n\r\n        return node;\r\n    }\r\n\r\n    worker(node, inputs, outputs) {\r\n        // TODO: There is no check whether all the inputs have the same item, this needs to happen. \r\n\r\n        var lengths = [inputs['i1'].length, inputs['i2'].length, inputs['i3'].length];\r\n\r\n        var outppm = 0;\r\n        outppm = lengths[0] ? outppm + inputs['i1'][0][1] : outppm;\r\n        outppm = lengths[1] ? outppm + inputs['i2'][0][1] : outppm;\r\n        outppm = lengths[2] ? outppm + inputs['i3'][0][1] : outppm;\r\n\r\n        const idx = lengths.findIndex(lgt => lgt >= 1);\r\n        var item;\r\n        var itemName;\r\n        switch (idx) {\r\n            case 0:\r\n                item = inputs['i1'][0][0]; \r\n                itemName = item.name;break;\r\n            case 1:\r\n                item = inputs['i2'][0][0]; \r\n                itemName = item.name;break;\r\n            case 2:\r\n                item = inputs['i3'][0][0];\r\n                itemName = item.name;break;\r\n            default:\r\n                item = null;\r\n                itemName = \"N/A\";\r\n        }\r\n\r\n        outputs['o1'] = [item,outppm];\r\n        updateOutputLabel(node,this.editor,'o1',{\r\n            recipeOutput: [itemName],\r\n            maxOutputPpm: [0],\r\n            actualOutPpm: [outppm],\r\n        },0,false)\r\n        //setOutputMessage(node,this.editor,'o1',outppm,outputs['o1'],false);\r\n    }\r\n}\r\n\r\nclass AdjustableNodePane extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.rotArray = [\"rotate(0deg)\", \"rotate(90deg)\", \"rotate(180deg)\", \"rotate(270deg)\",]\r\n        this.paneArray = [\"lrpane\",\"udpane\"];\r\n        this.positionArray = [\"left-socket\",\"top-socket\",\"right-socket\",\"bottom-socket\"];\r\n\r\n        var iniState = this.props.propShare.node.data.rotationState === undefined ? 0 : this.props.propShare.node.data.rotationState;\r\n        //this.state = { transform: this.stateArray[0], }\r\n        this.state = {\r\n            pane: this.paneArray[determineIndex(iniState+ 0,this.paneArray.length)],\r\n            inPos1: this.positionArray[determineIndex(iniState+1,this.positionArray.length)],\r\n            inPos2: this.positionArray[determineIndex(iniState+0,this.positionArray.length)],\r\n            inPos3: this.positionArray[determineIndex(iniState+3,this.positionArray.length)],\r\n            otPos: this.positionArray[determineIndex(iniState+2,this.positionArray.length)],\r\n            rotAdj: this.rotArray[determineIndex(iniState+0,this.rotArray.length)],\r\n        }\r\n        //this.stateArray = [\"0px\",\"20px\"];\r\n        //this.state = {margin: this.stateArray[0]};\r\n        this.handleRotate = this.handleRotate.bind(this);\r\n    }\r\n    // The problem is that this component cannot be clicked because it is behind the content pane\r\n    // So there needs to be another way to invoke this method from within this pane... hmm\r\n    // One way around that problem is to increase the scope of this class to include the content pane as well\r\n    //  Then the class will have direct access to the same pane that the user does, so it should be possible to invoke the method successfully.\r\n    handleRotate = (event) => {\r\n        if (event.key === 'r') {\r\n            //var idx = this.stateArray.findIndex((x) => x === this.state.transform);\r\n            //var idx = this.stateArray.findIndex((x)=>x===this.state.margin);\r\n            //alert(idx);\r\n            var idx1 = this.paneArray.findIndex((x)=> x===this.state.pane);\r\n            idx1 = idx1 === this.paneArray.length - 1 ? 0 : ++idx1;\r\n\r\n            var idx2_1 = this.positionArray.findIndex((x)=> x===this.state.inPos1);\r\n            idx2_1 = idx2_1 === this.positionArray.length - 1 ? 0 : ++idx2_1;\r\n            var idx2_2 = this.positionArray.findIndex((x)=> x===this.state.inPos2);\r\n            idx2_2 = idx2_2 === this.positionArray.length - 1 ? 0 : ++idx2_2;\r\n            var idx2_3 = this.positionArray.findIndex((x)=> x===this.state.inPos3);\r\n            idx2_3 = idx2_3 === this.positionArray.length - 1 ? 0 : ++idx2_3;\r\n\r\n            var idx3 = this.positionArray.findIndex((x)=> x===this.state.otPos);\r\n            idx3 = idx3 === this.positionArray.length - 1 ? 0 : ++idx3;\r\n\r\n            \r\n\r\n            var idx4 = this.rotArray.findIndex((x)=> x===this.state.rotAdj);\r\n            idx4 = idx4 === this.rotArray.length - 1 ? 0 : ++idx4;\r\n\r\n            this.setState({\r\n                pane: this.paneArray[idx1],\r\n                inPos1: this.positionArray[idx2_1],\r\n                inPos2: this.positionArray[idx2_2],\r\n                inPos3: this.positionArray[idx2_3],\r\n                otPos: this.positionArray[idx3],\r\n                rotAdj: this.rotArray[idx4],\r\n            });\r\n            //alert(this.stateArray[idx])\r\n            //this.setState({margin: this.stateArray[idx]});\r\n        }\r\n    }\r\n    \r\n    componentDidUpdate() {\r\n        //console.log(JSON.stringify(window.rete_editor))\r\n        try {\r\n            setTimeout(() => {\r\n                let node = this.props.propShare.node;\r\n                window.rete_editor.view.updateConnections({ node });\r\n                var idx4 = this.rotArray.findIndex((x)=> x===this.state.rotAdj);\r\n                node.data.rotationState = idx4;\r\n            }, 1000);\r\n\r\n        } catch {\r\n            return;\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const nodeTitleClass = this.props.nodeTitleClass;\r\n        const nodeLabel = this.props.nodeLabel;\r\n        const { node, bindSocket, bindControl } = this.props.propShare;\r\n        const { outputs, controls, inputs, selected } = this.props.stateShare;\r\n        return (\r\n            <div className=\"node-pane\" style={{width:\"100px\", height:\"100px\"}}>\r\n                <div className={\"socket-pane \"+this.state.pane}>\r\n                    <div className={this.state.inPos1}>\r\n                        <Socket\r\n                            type=\"input\"\r\n                            socket={inputs[0].socket}\r\n                            io={inputs[0]}\r\n                            innerRef={bindSocket}\r\n                        />\r\n                    </div>\r\n                </div>\r\n                <div className={\"socket-pane \"+this.state.pane}>\r\n                    <div className={this.state.inPos2}>\r\n                        <Socket\r\n                            type=\"input\"\r\n                            socket={inputs[1].socket}\r\n                            io={inputs[1]}\r\n                            innerRef={bindSocket}\r\n                        />\r\n                    </div>\r\n                </div>\r\n                <div className={\"socket-pane \"+this.state.pane}>\r\n                    <div className={this.state.inPos3}>\r\n                        <Socket\r\n                            type=\"input\"\r\n                            socket={inputs[2].socket}\r\n                            io={inputs[2]}\r\n                            innerRef={bindSocket}\r\n                        />\r\n                    </div>\r\n                </div>\r\n                <div className={\"socket-pane \"+this.state.pane}>\r\n                    <div className={this.state.otPos}>\r\n                        <Socket\r\n                            type=\"output\"\r\n                            socket={outputs[0].socket}\r\n                            io={outputs[0]}\r\n                            innerRef={bindSocket}\r\n                        />\r\n                    </div>\r\n                </div>\r\n                <div className=\"content-pane\" tabIndex=\"0\" onKeyPress={this.handleRotate}>\r\n                    <div className=\"label-pane\" style={{backgroundColor:\"orange\", paddingTop:\"5px\", paddingLeft:\"0px\"}}>\r\n                        <img src=\"./resources/arrow.png\" width=\"80px\" height=\"80px\" style={{transform: this.state.rotAdj, alignSelf:\"center\"}} draggable=\"false\" />\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport class MergerNode extends Node {\r\n    nodeTitleClass = \"title-producer\";\r\n    nodeLabel = \"Co\";\r\n    render() {\r\n        //tabIndex=\"0\" onKeyDown={(e) => this.handleRotate(e)}   <-- this is how you can get a div to take focus and respond to events\r\n        return (\r\n            <AdjustableNodePane propShare={this.props} stateShare={this.state} nodeTitleClass={this.nodeTitleClass} nodeLabel={this.nodeLabel}/>\r\n        );\r\n    }\r\n}","import { withStyles } from '@material-ui/core/styles';\r\nimport blue from '@material-ui/core/colors/blue'\r\nimport Button from '@material-ui/core/Button'\r\nimport Select from '@material-ui/core/Select'\r\n\r\nexport const BlueButton = withStyles((theme) => ({\r\n    root: {\r\n        color: theme.palette.getContrastText(blue[50]),\r\n        backgroundColor: blue[50],\r\n        margin: \"6px\",\r\n        '&:hover': {\r\n            backgroundColor: blue[500],\r\n            color: theme.palette.getContrastText(blue[500]),\r\n        },\r\n    },\r\n}))(Button);\r\n\r\nexport const ItemSelect = withStyles((theme) => ({\r\n    root: {\r\n        backgroundColor: \"white\",\r\n        margin: \"0px\",\r\n        padding: \"0px 5px\",\r\n        borderRadius: \"6px\",\r\n        transition: \"all 0.3s ease\",\r\n        '&:focus': {\r\n            backgroundColor:\"white\",\r\n            borderRadius: \"6px\",\r\n            margin: \"0px\",\r\n            padding: \"0px 5px\",\r\n        },\r\n    }\r\n}))(Select);\r\n\r\n","import React from \"react\";\r\nimport Rete from \"rete\";\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport {ItemSelect} from '../engine/material-ui-components'\r\n// Successor to DropControl\r\n\r\nexport class ObjectDropControl extends Rete.Control {\r\n    static component = ({ value, onChange, title, items }) => (\r\n        <span className=\"objectDropControl\">\r\n            {title}:&nbsp;<DynamicObjectSelect valueIn={value} onSelectChange={onChange} listItems={items} />\r\n        </span> // to make this part dynamic, the component cannot be static.. it must be built with a function\r\n    );\r\n\r\n    constructor(emitter, key, node, readonly = false, title, items) {\r\n        //items are expected to be objects with a \"name\" property\r\n        super(key);\r\n        this.emitter = emitter;\r\n        this.key = key;\r\n        this.component = ObjectDropControl.component;\r\n\r\n        var initial = node.data[key] || items[0];\r\n        initial = items.find(item => item.name === initial.name);// Make sure initial is contains the original class methods (needed for cloning)\r\n        //console.log(JSON.stringify(initial));\r\n\r\n        node.data[key] = initial;\r\n        this.props = {\r\n            readonly,\r\n            value: initial,\r\n            title: title,\r\n            items: items,\r\n            onChange: (val) => {\r\n                this.setValue(val);\r\n                this.emitter.trigger(\"process\");\r\n            }\r\n        };\r\n    }\r\n\r\n    setValue(val) {\r\n        this.props.value = val;\r\n        this.putData(this.key, val);\r\n        this.update();\r\n    }\r\n}\r\n\r\nclass DynamicObjectSelect extends React.Component {\r\n    constructor(props) {\r\n        super(props)\r\n        this.state = { value: props.valueIn.name };\r\n    }\r\n\r\n    //On the change event for the select box pass the selected value back to the parent\r\n    handleChange = (event) => {\r\n        let selectedValue = event.target.value;\r\n        let idx = this.props.listItems.findIndex(i => i.name === selectedValue);\r\n        this.props.onSelectChange(this.props.listItems[idx]);\r\n        this.setState({ value: selectedValue });\r\n    }\r\n\r\n    render() {\r\n        let arrayOfData = this.props.listItems;\r\n        let options = arrayOfData.map((data) =>\r\n            //<option value={data.name} key={data.name}>{data.name}</option>\r\n            <MenuItem key={data.name} value={data.name}>{data.name}</MenuItem>\r\n        );\r\n        return (\r\n            //name=\"customSearch\" className=\"custom-search-select\"\r\n            /*\r\n            <select className=\"dropdown-dark\" onChange={this.handleChange} value={this.state.value} onPointerMove={e=>e.stopPropagation()}>\r\n                {options}\r\n            </select>\r\n            \r\n            */\r\n            <div className=\"objectDropControl\" style={{display:\"inline-block\"}}>\r\n                <ItemSelect className=\"item-select\" value={this.state.value} autoWidth={true} onChange={this.handleChange}>{options}</ItemSelect>\r\n            </div>\r\n        )\r\n    }\r\n}","import React from \"react\";\r\nimport Rete from \"rete\";\r\n// UI\r\nimport ButtonGroup from '@material-ui/core/ButtonGroup'\r\nimport Button from '@material-ui/core/Button'\r\n\r\n\r\nexport class ButtonBarControl extends Rete.Control {\r\n    static component = ({ value, onChange, items, padding }) => (\r\n       <span>\r\n           <ButtonBar valueIn={value} onSelectChange={onChange} listItems={items} extraPadding={padding}/>\r\n       </span>\r\n       \r\n    );\r\n\r\n    constructor(emitter, key, node, readonly = false, items, padding) {\r\n        super(key);\r\n        this.emitter = emitter;\r\n        this.key = key;\r\n        this.component = ButtonBarControl.component;\r\n\r\n        var initial = node.data[key] || items[0];\r\n\r\n        node.data[key] = initial;\r\n        this.props = {\r\n            readonly,\r\n            value: initial,\r\n            items: items,\r\n            padding: padding,\r\n            onChange: (val) => {\r\n                this.setValue(val);\r\n                this.emitter.trigger(\"process\");\r\n            }\r\n        };\r\n    }\r\n\r\n    setValue(val) {\r\n        this.props.value = val;\r\n        this.putData(this.key, val);\r\n        this.update();\r\n    }\r\n}\r\n\r\nvar overlap = {padding:\"0em 0.5em\"};\r\nvar buttonToggled = {...overlap,backgroundColor:\"#1581B7\", color:\"white\"};\r\nvar buttonNotToggled = {...overlap,backgroundColor:\"#E3F2Fd\",color:\"black\"};\r\n\r\nclass ButtonBar extends React.Component {\r\n    constructor(props) {\r\n        super(props)\r\n        this.state = {value: props.valueIn};\r\n        this.handleChange = this.handleChange.bind(this);\r\n    }\r\n\r\n    handleChange = (event) => {\r\n        let selectedValue = event.currentTarget.value;\r\n        this.props.onSelectChange(selectedValue);\r\n        this.setState({ value: selectedValue });\r\n    }\r\n\r\n    render() {\r\n        \r\n        let arrayOfData = this.props.listItems;\r\n        let options = arrayOfData.map((data) => {\r\n            var buttonStyle;\r\n            if(data===this.state.value){\r\n                buttonStyle = buttonToggled;\r\n            }else{\r\n                buttonStyle = buttonNotToggled;\r\n            }\r\n            if(this.props.extraPadding!==null && this.props.extraPadding!==undefined){\r\n                buttonStyle = {...buttonStyle, padding: this.props.extraPadding};\r\n            }\r\n            return <Button key={data} style={buttonStyle} value={data} onClick={this.handleChange}>{data}</Button>\r\n        }\r\n\r\n        );\r\n        return (\r\n            \r\n            <ButtonGroup variant=\"contained\" color=\"primary\" size=\"small\">\r\n                {options}\r\n            </ButtonGroup>\r\n        )\r\n    }\r\n}\r\n","/* Notes\r\nI should be able to do all my processing with the item objects.\r\nIn the dropcontrol, I can create options from an array of item objects by calling data.name at option creation. \r\n*/\r\n\r\nexport const CATS = {\r\n    ORE: \"ore\",\r\n    LIQUID: \"liquid\",\r\n    MATERIAL: \"material\",\r\n    COMPONENT: \"component\",\r\n    FUEL: \"fuel\",\r\n    AMMO: \"ammo\",\r\n    SPECIAL: \"special\",\r\n};\r\n\r\nconst STRUC = {\r\n    MINR: \"Miner\",\r\n    SMLT: \"Smelter\",\r\n    CONS: \"Constructor\",\r\n    ASSM: \"Assembler\",\r\n    MANU: \"Manufacturer\",\r\n    REFI: \"Refinery\",\r\n    FOUN: \"Foundry\",\r\n}\r\n\r\nclass Item {\r\n    constructor(name, category) {\r\n        this.name = name;\r\n        this.category = category;\r\n    }\r\n\r\n    isAFluid() {\r\n        return this.category === CATS.LIQUID;\r\n    }\r\n}\r\n\r\n\r\nexport const ITEMS = {\r\n    IronOre: new Item(\"Iron Ore\", CATS.ORE),\r\n    CopperOre: new Item(\"Copper Ore\", CATS.ORE),\r\n    Limestone: new Item(\"Limestone\", CATS.ORE),\r\n    CateriumOre: new Item(\"Caterium Ore\", CATS.ORE),\r\n    Coal: new Item(\"Coal\", CATS.ORE),\r\n    RawQuartz: new Item(\"Raw Quartz\", CATS.ORE),\r\n    Sulfur: new Item(\"Sulfur\", CATS.ORE),\r\n    Bauxite: new Item(\"Bauxite\", CATS.ORE),\r\n    SAM: new Item(\"S.A.M Ore\", CATS.ORE),\r\n    Uranium: new Item(\"Uranium\", CATS.ORE),\r\n    Water: new Item(\"Water\", CATS.LIQUID),\r\n    CrudeOil: new Item(\"Crude Oil\", CATS.LIQUID),\r\n    HeavyOil: new Item(\"Heavy Oil\", CATS.LIQUID),\r\n    Fuel: new Item(\"Fuel\", CATS.LIQUID),\r\n    BioFuel: new Item(\"Liquid Biofuel\", CATS.LIQUID),\r\n    Turbofuel: new Item(\"Turbofuel\", CATS.LIQUID),\r\n    Alumina: new Item(\"Alumina Solution\", CATS.LIQUID),\r\n    SulfuricAcid: new Item(\"Sulfuric Acid\", CATS.LIQUID),\r\n    Concrete: new Item(\"Concrete\", CATS.MATERIAL),\r\n    IronIngot: new Item(\"Iron Ingot\", CATS.MATERIAL),\r\n    CopperIngot: new Item(\"Copper Ingot\", CATS.MATERIAL),\r\n    CateriumIngot: new Item(\"Caterium Ingot\", CATS.MATERIAL),\r\n    SteelIngot: new Item(\"Steel Ingot\", CATS.MATERIAL),\r\n    AluminumIngot: new Item(\"Alclad Aluminum Ingot\", CATS.MATERIAL),\r\n    QuartzCrystal: new Item(\"Quartz Crystal\", CATS.MATERIAL),\r\n    Polymer: new Item(\"Polymer Resin\", CATS.MATERIAL),\r\n    PetroleumCoke: new Item(\"Petroleum Coke\", CATS.MATERIAL),\r\n    AluminumScrap: new Item(\"Aluminum Scrap\", CATS.MATERIAL),\r\n    Silica: new Item(\"Silica\", CATS.MATERIAL),\r\n    BlackPowder: new Item(\"Black Powder\", CATS.MATERIAL),\r\n    Wire: new Item(\"Wire\", CATS.MATERIAL),\r\n    Cable: new Item(\"Cable\", CATS.MATERIAL),\r\n    IronRod: new Item(\"Iron Rod\", CATS.MATERIAL),\r\n    Screw: new Item(\"Screw\", CATS.MATERIAL),\r\n    IronPlate: new Item(\"Iron Plate\", CATS.MATERIAL),\r\n    ReinforcedIronPlate: new Item(\"Reinforced Iron Plate\", CATS.MATERIAL),\r\n    CopperSheet: new Item(\"Copper Sheet\", CATS.MATERIAL),\r\n    AluminumSheet: new Item(\"Aluminum Sheet\", CATS.MATERIAL),\r\n    Plastic: new Item(\"Plastic\", CATS.MATERIAL),\r\n    Rubber: new Item(\"Rubber\", CATS.MATERIAL),\r\n    PackWater: new Item(\"Packaged Water\", CATS.MATERIAL),\r\n    SteelPipe: new Item(\"Steel Pipe\", CATS.MATERIAL),\r\n    SteelBeam: new Item(\"Steel Beam\", CATS.MATERIAL),\r\n    EncasedIndustrialBeam: new Item(\"Encased Industrial Beam\", CATS.MATERIAL),\r\n    CrystalOscillator: new Item(\"Crystal Oscillator\", CATS.COMPONENT),\r\n    Canister: new Item (\"Empty Canister\", CATS.COMPONENT),\r\n    Fabric: new Item(\"Fabric\", CATS.COMPONENT),\r\n    ModularFrame: new Item(\"Modular Frame\", CATS.COMPONENT),\r\n    HeavyModularFrame: new Item(\"Heavy Modular Frame\", CATS.COMPONENT),\r\n    Rotor: new Item(\"Rotor\", CATS.COMPONENT),\r\n    Stator: new Item(\"Stator\", CATS.COMPONENT),\r\n    Motor: new Item(\"Motor\", CATS.COMPONENT),\r\n    Quickwire: new Item(\"Quickwire\", CATS.COMPONENT),\r\n    Circuit: new Item(\"Circuit\", CATS.COMPONENT),\r\n    Computer: new Item(\"Computer\", CATS.COMPONENT),\r\n    AILimiter: new Item(\"A.I. Limiter\", CATS.COMPONENT),\r\n    HighSpeedConnector: new Item(\"High-Speed Connector\", CATS.COMPONENT),\r\n    Supercomputer: new Item(\"Supercomputer\", CATS.COMPONENT),\r\n    Battery: new Item(\"Battery\", CATS.COMPONENT),\r\n    HeatSink: new Item(\"Heat Sink\", CATS.COMPONENT),\r\n    RadioControlUnit: new Item(\"Radio Control Unit\", CATS.COMPONENT),\r\n    TurboMotor: new Item(\"Turbo Motor\", CATS.COMPONENT),\r\n    ElectromagneticControlRod: new Item(\"Electromagnetic Control Rod\", CATS.COMPONENT),\r\n    UraniumPellet: new Item(\"Uranium Pellet\", CATS.COMPONENT),\r\n    EncasedUraniumCell: new Item(\"Encased Uranium Cell\", CATS.COMPONENT),\r\n    Beacon: new Item(\"Beacon\", CATS.COMPONENT),\r\n    CompactedCoal: new Item(\"Compacted Coal\", CATS.FUEL),\r\n    Leaves: new Item(\"Leaves\", CATS.FUEL),\r\n    Mycelia: new Item(\"Mycelia\", CATS.FUEL),\r\n    Wood: new Item(\"Wood\", CATS.FUEL),\r\n    Biomass: new Item(\"Biomass\", CATS.FUEL),\r\n    PackOil: new Item(\"Packaged Oil\", CATS.FUEL),\r\n    PackHeavyOil: new Item(\"Pack Heavy Oil Residue\", CATS.FUEL),\r\n    SolidBiofuel: new Item(\"Solid Biofuel\", CATS.FUEL),\r\n    PackFuel: new Item(\"Packaged Fuel\", CATS.FUEL),\r\n    PackBiofuel: new Item(\"Packaged Liquid Biofuel\", CATS.FUEL),\r\n    PackTurbofuel: new Item(\"Packaged Turbofuel\", CATS.FUEL),\r\n    NuclearFuelRod: new Item(\"Nuclear Fuel Rod\", CATS.FUEL),\r\n    Nobelisk: new Item(\"Nobelisk\", CATS.AMMO),\r\n    Filter: new Item(\"Filter\", CATS.AMMO),\r\n    ColorCartridge: new Item(\"Color Cartridge\", CATS.AMMO),\r\n    Cartridge: new Item(\"Cartridge\", CATS.AMMO),\r\n    SpikedRebar: new Item(\"Spiked Rebar\", CATS.AMMO),\r\n    IodineInfusedFilter: new Item(\"Iodine Infused Filter\", CATS.AMMO),\r\n    SmartPlating: new Item(\"Smart Plating\", CATS.SPECIAL),\r\n    VersatileFramework: new Item(\"Versatile Framework\", CATS.SPECIAL),\r\n    AutomatedWiring: new Item(\"Automated Wiring\", CATS.SPECIAL),\r\n    ModularEngine: new Item(\"Modular Engine\", CATS.SPECIAL),\r\n    AdaptiveControlUnit: new Item(\"Adaptive Control Unit\", CATS.SPECIAL),\r\n}\r\n\r\nclass Recipe {\r\n    constructor(name, structure) {\r\n        this.name = name;\r\n        this.structure = structure;\r\n        this.inputs = [];\r\n        this.outputs = [];\r\n        this.matchInput = this.matchInput.bind(this);\r\n        this.calculate = this.calculate.bind(this);\r\n    }\r\n    addInput(item, ppm) {\r\n        this.inputs[this.inputs.length] = [item, ppm];\r\n        return this;\r\n    }\r\n    addOutput(item, ppm) {\r\n        this.outputs[this.outputs.length] = [item, ppm];\r\n        return this;\r\n    }\r\n\r\n    matchInput(item, ppm, multiplier) {\r\n        var i = 0;\r\n        var finished = false;\r\n        var prc = 0;\r\n        var position = -1;\r\n        do {\r\n            if (this.inputs[i]!==undefined && item === this.inputs[i][0]) {\r\n                let requiredPpm = this.inputs[i][1] * multiplier;\r\n                let ratio = ppm / requiredPpm;\r\n                prc = ratio > 1 ? 1 : ratio;\r\n                position = i;\r\n                finished = true;\r\n            }\r\n            i++;\r\n            if(i===this.inputs.length){\r\n                finished=true;\r\n            }\r\n        } while (!finished);\r\n        return {\r\n            position: position,\r\n            percent: prc,\r\n        }\r\n    }\r\n\r\n    calculate(inputs, multiplier) {\r\n        //console.log(multiplier)\r\n        // inputs should be an array of [item,ppm] arrays for each input\r\n        const RIN = this.inputs.map(inp => inp[0].name);\r\n        const RRP = this.inputs.map(inp => inp[1] * multiplier);\r\n        var AIP = new Array(this.inputs.length).fill(0);\r\n        const ROT = this.outputs.map(out => out[0].name);\r\n        const MOP = this.outputs.map(out => out[1] * multiplier)\r\n        var PRC = new Array(this.inputs.length).fill(0);\r\n        for (var i = 0; i < inputs.length; i++) {\r\n            if (inputs[i] != null) {\r\n                let matchObj = this.matchInput(inputs[i][0], inputs[i][1], multiplier);\r\n                AIP[matchObj.position] += inputs[i][1];\r\n                PRC[matchObj.position] += matchObj.percent;\r\n            }\r\n        }\r\n        PRC = PRC.map(p => p > 1 ? 1 : p);\r\n        const AOP = MOP.map(mop=>mop*Math.min(...PRC));\r\n\r\n        return {\r\n            recipeInputs: RIN,\r\n            recipeReqPpm: RRP,\r\n            actualInpPpm: AIP,\r\n            recipeOutput: ROT,\r\n            maxOutputPpm: MOP,\r\n            actualOutPpm: AOP,\r\n        }\r\n    }\r\n}\r\n\r\nexport const SmelterRecipes = [\r\n    new Recipe(\"Iron\", STRUC.SMLT).addInput(ITEMS.IronOre, 30).addOutput(ITEMS.IronIngot, 30),\r\n    new Recipe(\"Copper\", STRUC.SMLT).addInput(ITEMS.CopperOre, 30).addOutput(ITEMS.CopperIngot, 30),\r\n    new Recipe(\"Caterium\", STRUC.SMLT).addInput(ITEMS.CateriumOre, 45).addOutput(ITEMS.CateriumIngot, 15),\r\n    new Recipe(\"Alt: Pure Aluminum Ingot\",STRUC.SMLT).addInput(ITEMS.AluminumScrap,144).addOutput(ITEMS.AluminumIngot,36),\r\n]\r\n\r\nexport const FoundryRecipes = [\r\n    new Recipe(\"Steel\", STRUC.FOUN).addInput(ITEMS.IronOre,45).addInput(ITEMS.Coal,45).addOutput(ITEMS.SteelIngot,45),\r\n    new Recipe(\"Aluminum\", STRUC.FOUN).addInput(ITEMS.Bauxite,105).addInput(ITEMS.Silica,90).addOutput(ITEMS.AluminumIngot,30),\r\n    new Recipe(\"Alt: Iron Alloy\", STRUC.FOUN).addInput(ITEMS.IronOre,20).addInput(ITEMS.CopperOre,20).addOutput(ITEMS.IronIngot,50),\r\n    new Recipe(\"Alt: Coke Steel\", STRUC.FOUN).addInput(ITEMS.IronOre,75).addInput(ITEMS.PetroleumCoke,75).addOutput(ITEMS.SteelIngot,100),\r\n    new Recipe(\"Alt: Compacted Steel\", STRUC.FOUN).addInput(ITEMS.IronOre,22.5).addInput(ITEMS.CompactedCoal,11.25).addOutput(ITEMS.SteelIngot,37.5),\r\n    new Recipe(\"Alt: Solid Steel\", STRUC.FOUN).addInput(ITEMS.IronIngot,40).addInput(ITEMS.Coal,40).addOutput(ITEMS.SteelIngot,60),\r\n]\r\n\r\nexport const ConstructorRecipes = [\r\n\tnew Recipe(\"Cable\",STRUC.CONS).addInput(ITEMS.Wire,60).addOutput(ITEMS.Cable,30),\r\n\tnew Recipe(\"Wire\",STRUC.CONS).addInput(ITEMS.CopperIngot,15).addOutput(ITEMS.Wire,30),\r\n\tnew Recipe(\"Concrete\",STRUC.CONS).addInput(ITEMS.Limestone,45).addOutput(ITEMS.Concrete,15),\r\n\tnew Recipe(\"Screw\",STRUC.CONS).addInput(ITEMS.IronRod,10).addOutput(ITEMS.Screw,40),\r\n\tnew Recipe(\"Biomass (Leaves)\",STRUC.CONS).addInput(ITEMS.Leaves,120).addOutput(ITEMS.Biomass,60),\r\n\tnew Recipe(\"Biomass (Wood)\",STRUC.CONS).addInput(ITEMS.Wood,60).addOutput(ITEMS.Biomass,300),\r\n\tnew Recipe(\"Iron Plate\",STRUC.CONS).addInput(ITEMS.IronIngot,30).addOutput(ITEMS.IronPlate,20),\r\n\tnew Recipe(\"Iron Rod\",STRUC.CONS).addInput(ITEMS.IronIngot,15).addOutput(ITEMS.IronRod,15),\r\n\tnew Recipe(\"Copper Sheet\",STRUC.CONS).addInput(ITEMS.CopperIngot,20).addOutput(ITEMS.CopperSheet,10),\r\n\tnew Recipe(\"Quartz Crystal\",STRUC.CONS).addInput(ITEMS.RawQuartz,37.5).addOutput(ITEMS.QuartzCrystal,22.5),\r\n\tnew Recipe(\"Alt: Steel Rod\",STRUC.CONS).addInput(ITEMS.SteelIngot,12).addOutput(ITEMS.IronRod,48),\r\n\tnew Recipe(\"Steel Beam\",STRUC.CONS).addInput(ITEMS.SteelIngot,60).addOutput(ITEMS.SteelBeam,15),\r\n\tnew Recipe(\"Steel Pipe\",STRUC.CONS).addInput(ITEMS.SteelIngot,30).addOutput(ITEMS.SteelPipe,20),\r\n\tnew Recipe(\"Alt: Charcoal\",STRUC.CONS).addInput(ITEMS.Wood,15).addOutput(ITEMS.Coal,150),\r\n\tnew Recipe(\"Alt: Biocoal\",STRUC.CONS).addInput(ITEMS.Biomass,37.5).addOutput(ITEMS.Coal,45),\r\n\tnew Recipe(\"Alt: Casted Screw\",STRUC.CONS).addInput(ITEMS.IronIngot,12.5).addOutput(ITEMS.Screw,50),\r\n\tnew Recipe(\"Alt: Steel Screw\",STRUC.CONS).addInput(ITEMS.SteelBeam,5).addOutput(ITEMS.Screw,260),\r\n\tnew Recipe(\"Silica\",STRUC.CONS).addInput(ITEMS.RawQuartz,22.5).addOutput(ITEMS.Silica,37.5),\r\n\tnew Recipe(\"Alt: Iron Wire\",STRUC.CONS).addInput(ITEMS.IronIngot,12.5).addOutput(ITEMS.Wire,22.5),\r\n\tnew Recipe(\"Alt: Caterium Wire\",STRUC.CONS).addInput(ITEMS.CateriumIngot,15).addOutput(ITEMS.Wire,120),\r\n\tnew Recipe(\"Solid Biofuel\",STRUC.CONS).addInput(ITEMS.Biomass,120).addOutput(ITEMS.SolidBiofuel,60),\r\n\tnew Recipe(\"Empty Canister\",STRUC.CONS).addInput(ITEMS.Plastic,30).addOutput(ITEMS.Canister,60),\r\n\t//new Recipe(\"Biomass (Alien Carapace)\",STRUC.CONS).addInput(ITEMS.AlienCarapace,15).addOutput(ITEMS.Biomass,1500),\r\n\tnew Recipe(\"Spiked Rebar\",STRUC.CONS).addInput(ITEMS.IronRod,15).addOutput(ITEMS.SpikedRebar,15),\r\n\t//new Recipe(\"Biomass (Alien Organs)\",STRUC.CONS).addInput(ITEMS.AlienOrgans,7.5).addOutput(ITEMS.Biomass,1500),\r\n\tnew Recipe(\"Quickwire\",STRUC.CONS).addInput(ITEMS.CateriumIngot,12).addOutput(ITEMS.Quickwire,60),\r\n\t//new Recipe(\"Color Cartridge\",STRUC.CONS).addInput(ITEMS.FlowerPetals,37.5).addOutput(ITEMS.ColorCartridge,75),\r\n\tnew Recipe(\"Biomass (Mycelia)\",STRUC.CONS).addInput(ITEMS.Mycelia,150).addOutput(ITEMS.Biomass,150),\r\n\t//new Recipe(\"Power Shard (1)\",STRUC.CONS).addInput(ITEMS.GreenPowerSlug,6).addOutput(ITEMS.PowerShard,6),\r\n    //new Recipe(\"Power Shard (2)\",STRUC.CONS).addInput(ITEMS.YellowPowerSlug,4).addOutput(ITEMS.PowerShard,8),\r\n    //new Recipe(\"Power Shard (5)\",STRUC.CONS).addInput(ITEMS.PurplePowerSlug,3).addOutput(ITEMS.PowerShard,15),\r\n]\r\n\r\nexport const AssemblerRecipes = [\r\n\tnew Recipe(\"Reinforced Iron Plate\",STRUC.ASSM).addInput(ITEMS.IronPlate,30).addInput(ITEMS.Screw,60).addOutput(ITEMS.ReinforcedIronPlate,5),\r\n    new Recipe(\"Alt: Adhered Iron Plate\",STRUC.ASSM).addInput(ITEMS.IronPlate,11.25).addInput(ITEMS.Rubber,3.75).addOutput(ITEMS.ReinforcedIronPlate,3.75),\r\n    new Recipe(\"Alt: Stitched Iron Plate\",STRUC.ASSM).addInput(ITEMS.IronPlate,18.75).addInput(ITEMS.Wire,37.5).addOutput(ITEMS.ReinforcedIronPlate,5.625),\r\n\tnew Recipe(\"Circuit Board\",STRUC.ASSM).addInput(ITEMS.CopperSheet,15).addInput(ITEMS.Plastic,30).addOutput(ITEMS.Circuit,7.5),\r\n\tnew Recipe(\"Alt: Bolted Frame\",STRUC.ASSM).addInput(ITEMS.ReinforcedIronPlate,7.5).addInput(ITEMS.Screw,140).addOutput(ITEMS.ModularFrame,5),\r\n    new Recipe(\"Modular Frame\",STRUC.ASSM).addInput(ITEMS.ReinforcedIronPlate,3).addInput(ITEMS.IronRod,12).addOutput(ITEMS.ModularFrame,2),\r\n    new Recipe(\"Alt: Steeled Frame\",STRUC.ASSM).addInput(ITEMS.ReinforcedIronPlate,2).addInput(ITEMS.SteelPipe,10).addOutput(ITEMS.ModularFrame,3),\r\n\tnew Recipe(\"Rotor\",STRUC.ASSM).addInput(ITEMS.IronRod,20).addInput(ITEMS.Screw,100).addOutput(ITEMS.Rotor,4),\r\n\tnew Recipe(\"Smart Plating\",STRUC.ASSM).addInput(ITEMS.ReinforcedIronPlate,2).addInput(ITEMS.Rotor,2).addOutput(ITEMS.SmartPlating,2),\r\n\tnew Recipe(\"Alt: Coated Iron Plate\",STRUC.ASSM).addInput(ITEMS.IronIngot,50).addInput(ITEMS.Plastic,10).addOutput(ITEMS.IronPlate,75),\r\n\tnew Recipe(\"Alt: Copper Rotor\",STRUC.ASSM).addInput(ITEMS.CopperSheet,22.5).addInput(ITEMS.Screw,195).addOutput(ITEMS.Rotor,11.25),\r\n\tnew Recipe(\"Alclad Aluminum Sheet\",STRUC.ASSM).addInput(ITEMS.AluminumIngot,60).addInput(ITEMS.CopperIngot,22.5).addOutput(ITEMS.AluminumSheet,30),\r\n\tnew Recipe(\"Alt: Electrode Circuit Board\",STRUC.ASSM).addInput(ITEMS.Rubber,30).addInput(ITEMS.PetroleumCoke,45).addOutput(ITEMS.Circuit,5),\r\n\tnew Recipe(\"Alt: Fused Wire\",STRUC.ASSM).addInput(ITEMS.CopperIngot,12).addInput(ITEMS.CateriumIngot,3).addOutput(ITEMS.Wire,90),\r\n\tnew Recipe(\"Encased Industrial Beam\",STRUC.ASSM).addInput(ITEMS.SteelBeam,24).addInput(ITEMS.Concrete,30).addOutput(ITEMS.EncasedIndustrialBeam,6),\r\n\tnew Recipe(\"Motor\",STRUC.ASSM).addInput(ITEMS.Rotor,10).addInput(ITEMS.Stator,10).addOutput(ITEMS.Motor,5),\r\n\tnew Recipe(\"Stator\",STRUC.ASSM).addInput(ITEMS.SteelPipe,15).addInput(ITEMS.Wire,40).addOutput(ITEMS.Stator,5),\r\n\tnew Recipe(\"Automated Wiring\",STRUC.ASSM).addInput(ITEMS.Stator,2.5).addInput(ITEMS.Cable,50).addOutput(ITEMS.AutomatedWiring,2.5),\r\n\tnew Recipe(\"A.I. Limiter\",STRUC.ASSM).addInput(ITEMS.CopperSheet,25).addInput(ITEMS.Quickwire,100).addOutput(ITEMS.AILimiter,5),\r\n\tnew Recipe(\"Fabric\",STRUC.ASSM).addInput(ITEMS.Mycelia,15).addInput(ITEMS.Biomass,75).addOutput(ITEMS.Fabric,15),\r\n\tnew Recipe(\"Alt: Rubber Concrete\",STRUC.ASSM).addInput(ITEMS.Limestone,50).addInput(ITEMS.Rubber,10).addOutput(ITEMS.Concrete,45),\r\n\tnew Recipe(\"Alt: Steel Coated Plate\",STRUC.ASSM).addInput(ITEMS.SteelIngot,7.5).addInput(ITEMS.Plastic,5).addOutput(ITEMS.IronPlate,45),\r\n\tnew Recipe(\"Versatile Framework\",STRUC.ASSM).addInput(ITEMS.ModularFrame,2.5).addInput(ITEMS.SteelBeam,30).addOutput(ITEMS.VersatileFramework,5),\r\n\tnew Recipe(\"Alt: Compacted Coal\",STRUC.ASSM).addInput(ITEMS.Coal,25).addInput(ITEMS.Sulfur,25).addOutput(ITEMS.CompactedCoal,25),\r\n\tnew Recipe(\"Alt: Insulated Cable\",STRUC.ASSM).addInput(ITEMS.Wire,45).addInput(ITEMS.Rubber,30).addOutput(ITEMS.Cable,100),\r\n\tnew Recipe(\"Alt: Quickwire Cable\",STRUC.ASSM).addInput(ITEMS.Quickwire,7.5).addInput(ITEMS.Rubber,5).addOutput(ITEMS.Cable,27.5),\r\n\tnew Recipe(\"Alt: Silicone Circuit Board\",STRUC.ASSM).addInput(ITEMS.CopperSheet,27.5).addInput(ITEMS.Silica,27.5).addOutput(ITEMS.Circuit,12.5),\r\n\tnew Recipe(\"Alt: Caterium Circuit Board\",STRUC.ASSM).addInput(ITEMS.Plastic,12.5).addInput(ITEMS.Quickwire,37.5).addOutput(ITEMS.Circuit,8.75),\r\n\tnew Recipe(\"Alt: Crystal Computer\",STRUC.ASSM).addInput(ITEMS.Circuit,7.5).addInput(ITEMS.CrystalOscillator,2.8125).addOutput(ITEMS.Computer,2.8125),\r\n\tnew Recipe(\"Alt: Fine Concrete\",STRUC.ASSM).addInput(ITEMS.Silica,7.5).addInput(ITEMS.Limestone,30).addOutput(ITEMS.Concrete,25),\r\n\tnew Recipe(\"Alt: Electromagnetic Connection Rod\",STRUC.ASSM).addInput(ITEMS.Stator,10).addInput(ITEMS.HighSpeedConnector,5).addOutput(ITEMS.ElectromagneticControlRod,10),\r\n\tnew Recipe(\"Electromagnetic Control Rod\",STRUC.ASSM).addInput(ITEMS.Stator,6).addInput(ITEMS.AILimiter,4).addOutput(ITEMS.ElectromagneticControlRod,4),\r\n\tnew Recipe(\"Encased Uranium Cell\",STRUC.ASSM).addInput(ITEMS.UraniumPellet,40).addInput(ITEMS.Concrete,9).addOutput(ITEMS.EncasedUraniumCell,10),\r\n\tnew Recipe(\"Alt: Fine Black Powder\",STRUC.ASSM).addInput(ITEMS.Sulfur,7.5).addInput(ITEMS.CompactedCoal,3.75).addOutput(ITEMS.BlackPowder,15),\r\n\tnew Recipe(\"Alt: Heat Exchanger\",STRUC.ASSM).addInput(ITEMS.AluminumSheet,37.5).addInput(ITEMS.CopperSheet,56.25).addOutput(ITEMS.HeatSink,13.125),\r\n\tnew Recipe(\"Heat Sink\",STRUC.ASSM).addInput(ITEMS.AluminumSheet,40).addInput(ITEMS.Rubber,70).addOutput(ITEMS.HeatSink,10),\r\n\tnew Recipe(\"Alt: Steeled Frame\",STRUC.ASSM).addInput(ITEMS.ReinforcedIronPlate,2).addInput(ITEMS.SteelPipe,10).addOutput(ITEMS.ModularFrame,3),\r\n\tnew Recipe(\"Nobelisk\",STRUC.ASSM).addInput(ITEMS.BlackPowder,15).addInput(ITEMS.SteelPipe,30).addOutput(ITEMS.Nobelisk,3),\r\n\tnew Recipe(\"Alt: Fused Quckwire\",STRUC.ASSM).addInput(ITEMS.CateriumIngot,7.5).addInput(ITEMS.CopperIngot,37.5).addOutput(ITEMS.Quickwire,90),\r\n\tnew Recipe(\"Alt: Bolted Iron Plate\",STRUC.ASSM).addInput(ITEMS.IronPlate,90).addInput(ITEMS.Screw,250).addOutput(ITEMS.ReinforcedIronPlate,15),\r\n\tnew Recipe(\"Alt: Stitched Iron Plate\",STRUC.ASSM).addInput(ITEMS.IronPlate,18.75).addInput(ITEMS.Wire,37.5).addOutput(ITEMS.ReinforcedIronPlate,5.625),\r\n\tnew Recipe(\"Alt: Encased Industrial Pipe\",STRUC.ASSM).addInput(ITEMS.SteelPipe,28).addInput(ITEMS.Concrete,20).addOutput(ITEMS.EncasedIndustrialBeam,4),\r\n\tnew Recipe(\"Alt: Steel Rotor\",STRUC.ASSM).addInput(ITEMS.SteelPipe,10).addInput(ITEMS.Wire,30).addOutput(ITEMS.Rotor,5),\r\n\tnew Recipe(\"Alt: Cheap Silica\",STRUC.ASSM).addInput(ITEMS.RawQuartz,11.25).addInput(ITEMS.Limestone,18.75).addOutput(ITEMS.Silica,26.25),\r\n    new Recipe(\"Alt: Quickwire Stator\",STRUC.ASSM).addInput(ITEMS.SteelPipe,16).addInput(ITEMS.Quickwire,60).addOutput(ITEMS.Stator,8),\r\n    new Recipe(\"Black Powder\",STRUC.ASSM).addInput(ITEMS.Coal,7.5).addInput(ITEMS.Sulfur,15).addOutput(ITEMS.BlackPowder,7.5),\r\n]\r\n\r\nexport const ManufacturerRecipes = [\r\n\tnew Recipe(\"Alt: Flexible Framework\",STRUC.MANU).addInput(ITEMS.ModularFrame,3.75).addInput(ITEMS.SteelBeam,22.5).addInput(ITEMS.Rubber,30).addOutput(ITEMS.VersatileFramework,7.5),\r\n\tnew Recipe(\"Alt: Heavy Flexible Frame\",STRUC.MANU).addInput(ITEMS.ModularFrame,18.75).addInput(ITEMS.EncasedIndustrialBeam,11.25).addInput(ITEMS.Rubber,75).addInput(ITEMS.Screw,390).addOutput(ITEMS.HeavyModularFrame,3.75),\r\n\tnew Recipe(\"Computer\",STRUC.MANU).addInput(ITEMS.Circuit,25).addInput(ITEMS.Cable,22.5).addInput(ITEMS.Plastic,45).addInput(ITEMS.Screw,130).addOutput(ITEMS.Computer,2.5),\r\n\tnew Recipe(\"Modular Engine\",STRUC.MANU).addInput(ITEMS.Motor,2).addInput(ITEMS.Rubber,15).addInput(ITEMS.SmartPlating,2).addOutput(ITEMS.ModularEngine,1),\r\n\tnew Recipe(\"Adaptive Control Unit\",STRUC.MANU).addInput(ITEMS.AutomatedWiring,7.5).addInput(ITEMS.Circuit,5).addInput(ITEMS.HeavyModularFrame,1).addInput(ITEMS.Computer,1).addOutput(ITEMS.AdaptiveControlUnit,1),\r\n\tnew Recipe(\"Alt: Automated Speed Wiring\",STRUC.MANU).addInput(ITEMS.Stator,3.75).addInput(ITEMS.Wire,75).addInput(ITEMS.HighSpeedConnector,1.875).addOutput(ITEMS.AutomatedWiring,7.5),\r\n\tnew Recipe(\"Heavy Modular Frame\",STRUC.MANU).addInput(ITEMS.ModularFrame,10).addInput(ITEMS.SteelPipe,30).addInput(ITEMS.EncasedIndustrialBeam,10).addInput(ITEMS.Screw,200).addOutput(ITEMS.HeavyModularFrame,2),\r\n\tnew Recipe(\"Alt: Plastic Smart Plating\",STRUC.MANU).addInput(ITEMS.ReinforcedIronPlate,2.5).addInput(ITEMS.Rotor,2.5).addInput(ITEMS.Plastic,7.5).addOutput(ITEMS.SmartPlating,5),\r\n\tnew Recipe(\"Alt: Crystal Beacon\",STRUC.MANU).addInput(ITEMS.SteelBeam,2).addInput(ITEMS.SteelPipe,8).addInput(ITEMS.CrystalOscillator,0.5).addOutput(ITEMS.Beacon,10),\r\n\tnew Recipe(\"Alt: Caterium Computer\",STRUC.MANU).addInput(ITEMS.Circuit,26.25).addInput(ITEMS.Quickwire,105).addInput(ITEMS.Rubber,45).addOutput(ITEMS.Computer,3.75),\r\n\tnew Recipe(\"Alt: Insulated Crystal Oscillator\",STRUC.MANU).addInput(ITEMS.QuartzCrystal,18.75).addInput(ITEMS.Rubber,13.125).addInput(ITEMS.AILimiter,1.875).addOutput(ITEMS.CrystalOscillator,1.875),\r\n\tnew Recipe(\"Crystal Oscillator\",STRUC.MANU).addInput(ITEMS.QuartzCrystal,18).addInput(ITEMS.Cable,14).addInput(ITEMS.ReinforcedIronPlate,2.5).addOutput(ITEMS.CrystalOscillator,1),\r\n\tnew Recipe(\"Nuclear Fuel Rod\",STRUC.MANU).addInput(ITEMS.EncasedUraniumCell,10).addInput(ITEMS.EncasedIndustrialBeam,1.2).addInput(ITEMS.ElectromagneticControlRod,2).addOutput(ITEMS.NuclearFuelRod,0.4),\r\n\tnew Recipe(\"Battery\",STRUC.MANU).addInput(ITEMS.AluminumSheet,15).addInput(ITEMS.Wire,30).addInput(ITEMS.Sulfur,37.5).addInput(ITEMS.Plastic,15).addOutput(ITEMS.Battery,5.625),\r\n\tnew Recipe(\"Turbo Motor\",STRUC.MANU).addInput(ITEMS.HeatSink,7.5).addInput(ITEMS.RadioControlUnit,3.75).addInput(ITEMS.Motor,7.5).addInput(ITEMS.Rubber,45).addOutput(ITEMS.TurboMotor,1.875),\r\n\tnew Recipe(\"Alt: Heavy Encased Frame\",STRUC.MANU).addInput(ITEMS.ModularFrame,7.5).addInput(ITEMS.EncasedIndustrialBeam,9.375).addInput(ITEMS.SteelPipe,33.75).addInput(ITEMS.Concrete,20.625).addOutput(ITEMS.HeavyModularFrame,2.8125),\r\n\tnew Recipe(\"Alt: Silicone High-Speed Connector\",STRUC.MANU).addInput(ITEMS.Quickwire,90).addInput(ITEMS.Silica,37.5).addInput(ITEMS.Circuit,3).addOutput(ITEMS.HighSpeedConnector,3),\r\n\tnew Recipe(\"High-Speed Connector\",STRUC.MANU).addInput(ITEMS.Quickwire,210).addInput(ITEMS.Cable,37.5).addInput(ITEMS.Circuit,3.75).addOutput(ITEMS.HighSpeedConnector,3.75),\r\n\tnew Recipe(\"Alt: Rigour Motor\",STRUC.MANU).addInput(ITEMS.Rotor,3.75).addInput(ITEMS.Stator,3.75).addInput(ITEMS.CrystalOscillator,1.25).addOutput(ITEMS.Motor,7.5),\r\n\tnew Recipe(\"Alt: Seismic Nobelisk\",STRUC.MANU).addInput(ITEMS.BlackPowder,12).addInput(ITEMS.SteelPipe,12).addInput(ITEMS.CrystalOscillator,1.5).addOutput(ITEMS.Nobelisk,6),\r\n\tnew Recipe(\"Alt: Nuclear Fuel Unit\",STRUC.MANU).addInput(ITEMS.EncasedUraniumCell,10).addInput(ITEMS.ElectromagneticControlRod,2).addInput(ITEMS.CrystalOscillator,0.6).addInput(ITEMS.Beacon,1.2).addOutput(ITEMS.NuclearFuelRod,0.6),\r\n\tnew Recipe(\"Alt: Radio Control System\",STRUC.MANU).addInput(ITEMS.HeatSink,12.5).addInput(ITEMS.Supercomputer,1.25).addInput(ITEMS.QuartzCrystal,37.5).addOutput(ITEMS.RadioControlUnit,3.75),\r\n\tnew Recipe(\"Radio Control Unit\",STRUC.MANU).addInput(ITEMS.HeatSink,10).addInput(ITEMS.Rubber,40).addInput(ITEMS.CrystalOscillator,2.5).addInput(ITEMS.Computer,2.5).addOutput(ITEMS.RadioControlUnit,2.5),\r\n\tnew Recipe(\"Alt: Turbo Rigour Motor\",STRUC.MANU).addInput(ITEMS.Motor,6.5625).addInput(ITEMS.RadioControlUnit,4.6875).addInput(ITEMS.AILimiter,8.4375).addInput(ITEMS.Stator,6.5625).addOutput(ITEMS.TurboMotor,2.8125),\r\n\tnew Recipe(\"Alt: Infused Uranium Cell\",STRUC.MANU).addInput(ITEMS.UraniumPellet,20).addInput(ITEMS.Sulfur,22.5).addInput(ITEMS.Silica,22.5).addInput(ITEMS.Quickwire,37.5).addOutput(ITEMS.EncasedUraniumCell,17.5),\r\n\tnew Recipe(\"Beacon\",STRUC.MANU).addInput(ITEMS.IronPlate,22.5).addInput(ITEMS.IronRod,7.5).addInput(ITEMS.Wire,112.5).addInput(ITEMS.Cable,15).addOutput(ITEMS.Beacon,7.5),\r\n\tnew Recipe(\"Filter\",STRUC.MANU).addInput(ITEMS.Coal,37.5).addInput(ITEMS.Rubber,15).addInput(ITEMS.Fabric,15).addOutput(ITEMS.Filter,7.5),\r\n\tnew Recipe(\"Iodine Infused Filter\",STRUC.MANU).addInput(ITEMS.Filter,3.75).addInput(ITEMS.Quickwire,30).addInput(ITEMS.Rubber,7.5).addOutput(ITEMS.IodineInfusedFilter,3.75),\r\n    new Recipe(\"Supercomputer\",STRUC.MANU).addInput(ITEMS.Computer,3.75).addInput(ITEMS.AILimiter,3.75).addInput(ITEMS.HighSpeedConnector,5.625).addInput(ITEMS.Plastic,52.5).addOutput(ITEMS.Supercomputer,1.875),\r\n    new Recipe(\"Cartridge\",STRUC.MANU).addInput(ITEMS.Beacon,3).addInput(ITEMS.SteelPipe,30).addInput(ITEMS.BlackPowder,30).addInput(ITEMS.Rubber,30).addOutput(ITEMS.Cartridge,15),\r\n]\r\n\r\nexport const RefineryRecipes = [\r\n\tnew Recipe(\"Fuel\",STRUC.REFI).addInput(ITEMS.CrudeOil,60).addOutput(ITEMS.Fuel,40).addOutput(ITEMS.Polymer,30),\r\n\tnew Recipe(\"Petroleum Coke\",STRUC.REFI).addInput(ITEMS.HeavyOil,40).addOutput(ITEMS.PetroleumCoke,120),\r\n\tnew Recipe(\"Plastic\",STRUC.REFI).addInput(ITEMS.CrudeOil,30).addOutput(ITEMS.Plastic,20).addOutput(ITEMS.HeavyOil,10),\r\n\tnew Recipe(\"Rubber\",STRUC.REFI).addInput(ITEMS.CrudeOil,30).addOutput(ITEMS.Rubber,20).addOutput(ITEMS.HeavyOil,20),\r\n\tnew Recipe(\"Residual Fuel\",STRUC.REFI).addInput(ITEMS.HeavyOil,60).addOutput(ITEMS.Fuel,40),\r\n\tnew Recipe(\"Residual Plastic\",STRUC.REFI).addInput(ITEMS.Polymer,60).addInput(ITEMS.Water,20).addOutput(ITEMS.Plastic,20),\r\n\tnew Recipe(\"Residual Rubber\",STRUC.REFI).addInput(ITEMS.Polymer,40).addInput(ITEMS.Water,40).addOutput(ITEMS.Rubber,20),\r\n\tnew Recipe(\"Alt: Coated Cable\",STRUC.REFI).addInput(ITEMS.Wire,375).addInput(ITEMS.HeavyOil,15).addOutput(ITEMS.Cable,675),\r\n\tnew Recipe(\"Alt: Diluted Pack Fuel\",STRUC.REFI).addInput(ITEMS.HeavyOil,30).addInput(ITEMS.PackWater,60).addOutput(ITEMS.PackFuel,60),\r\n\tnew Recipe(\"Alt: Electrode - Aluminum Scrap\",STRUC.REFI).addInput(ITEMS.Alumina,90).addInput(ITEMS.Coal,30).addOutput(ITEMS.AluminumScrap,150).addOutput(ITEMS.Water,30),\r\n\tnew Recipe(\"Alumina Solution\",STRUC.REFI).addInput(ITEMS.Bauxite,70).addInput(ITEMS.Water,100).addOutput(ITEMS.Alumina,80).addOutput(ITEMS.Silica,20),\r\n\tnew Recipe(\"Aluminum Scrap\",STRUC.REFI).addInput(ITEMS.Alumina,240).addInput(ITEMS.PetroleumCoke,60).addOutput(ITEMS.AluminumScrap,360).addOutput(ITEMS.Water,60),\r\n\tnew Recipe(\"Alt: Heavy Oil Residue\",STRUC.REFI).addInput(ITEMS.CrudeOil,30).addOutput(ITEMS.HeavyOil,40).addOutput(ITEMS.Polymer,20),\r\n\tnew Recipe(\"Alt: Polyester Fabric\",STRUC.REFI).addInput(ITEMS.Polymer,80).addInput(ITEMS.Water,50).addOutput(ITEMS.Fabric,5),\r\n\tnew Recipe(\"Alt: Polymer Resin\",STRUC.REFI).addInput(ITEMS.CrudeOil,60).addOutput(ITEMS.Polymer,130).addOutput(ITEMS.HeavyOil,20),\r\n\tnew Recipe(\"Alt: Pure Caterium Ingot\",STRUC.REFI).addInput(ITEMS.CateriumOre,24).addInput(ITEMS.Water,24).addOutput(ITEMS.CateriumIngot,12),\r\n\tnew Recipe(\"Alt: Pure Copper Ingot\",STRUC.REFI).addInput(ITEMS.CopperOre,15).addInput(ITEMS.Water,10).addOutput(ITEMS.CopperIngot,375),\r\n\tnew Recipe(\"Alt: Pure Iron Ingot\",STRUC.REFI).addInput(ITEMS.IronOre,35).addInput(ITEMS.Water,20).addOutput(ITEMS.IronIngot,65),\r\n\tnew Recipe(\"Alt: Pure Quartz Crystal\",STRUC.REFI).addInput(ITEMS.RawQuartz,675).addInput(ITEMS.Water,375).addOutput(ITEMS.QuartzCrystal,525),\r\n\tnew Recipe(\"Alt: Recycled Rubber\",STRUC.REFI).addInput(ITEMS.Plastic,30).addInput(ITEMS.Fuel,30).addOutput(ITEMS.Rubber,60),\r\n\tnew Recipe(\"Alt: Steamed Copper Sheet\",STRUC.REFI).addInput(ITEMS.CopperIngot,225).addInput(ITEMS.Water,225).addOutput(ITEMS.CopperSheet,225),\r\n\tnew Recipe(\"Alt: Turbo Heavy Fuel\",STRUC.REFI).addInput(ITEMS.HeavyOil,375).addInput(ITEMS.CompactedCoal,30).addOutput(ITEMS.Turbofuel,30),\r\n\tnew Recipe(\"Pack Turbofuel\",STRUC.REFI).addInput(ITEMS.Turbofuel,20).addInput(ITEMS.Canister,20).addOutput(ITEMS.PackTurbofuel,20),\r\n\tnew Recipe(\"Unpackage Turbo Fuel\",STRUC.REFI).addInput(ITEMS.PackTurbofuel,20).addOutput(ITEMS.Turbofuel,20).addOutput(ITEMS.Canister,20),\r\n\tnew Recipe(\"Alt: Wet Concrete\",STRUC.REFI).addInput(ITEMS.Limestone,120).addInput(ITEMS.Water,100).addOutput(ITEMS.Concrete,80),\r\n\tnew Recipe(\"Sulfuric Acid\",STRUC.REFI).addInput(ITEMS.Sulfur,50).addInput(ITEMS.Water,50).addOutput(ITEMS.SulfuricAcid,100),\r\n\tnew Recipe(\"Uranium Pellet\",STRUC.REFI).addInput(ITEMS.Uranium,50).addInput(ITEMS.SulfuricAcid,80).addOutput(ITEMS.UraniumPellet,50).addOutput(ITEMS.SulfuricAcid,20),\r\n\tnew Recipe(\"Alt: Recycled Plastic\",STRUC.REFI).addInput(ITEMS.Rubber,30).addInput(ITEMS.Fuel,30).addOutput(ITEMS.Plastic,60),\r\n\tnew Recipe(\"Turbofuel\",STRUC.REFI).addInput(ITEMS.Fuel,225).addInput(ITEMS.CompactedCoal,15).addOutput(ITEMS.Turbofuel,1.88e+03),\r\n\tnew Recipe(\"Unpackage Liquid Biofuel\",STRUC.REFI).addInput(ITEMS.PackBiofuel,60).addOutput(ITEMS.Biofuel,60).addOutput(ITEMS.Canister,60),\r\n\tnew Recipe(\"Unpackage Fuel\",STRUC.REFI).addInput(ITEMS.PackFuel,60).addOutput(ITEMS.Fuel,60).addOutput(ITEMS.Canister,60),\r\n\tnew Recipe(\"Unpackage Oil\",STRUC.REFI).addInput(ITEMS.PackOil,60).addOutput(ITEMS.CrudeOil,60).addOutput(ITEMS.Canister,60),\r\n\tnew Recipe(\"Unpackage Heavy Oil Residue\",STRUC.REFI).addInput(ITEMS.PackHeavyOil,20).addOutput(ITEMS.HeavyOil,20).addOutput(ITEMS.Canister,20),\r\n\tnew Recipe(\"Unpackage Water\",STRUC.REFI).addInput(ITEMS.PackWater,120).addOutput(ITEMS.Water,120).addOutput(ITEMS.Canister,120),\r\n\tnew Recipe(\"Pack Fuel\",STRUC.REFI).addInput(ITEMS.Fuel,40).addInput(ITEMS.Canister,40).addOutput(ITEMS.PackFuel,40),\r\n\tnew Recipe(\"Liquid Biofuel\",STRUC.REFI).addInput(ITEMS.SolidBiofuel,90).addInput(ITEMS.Water,45).addOutput(ITEMS.Biofuel,60),\r\n\tnew Recipe(\"Pack Liquid Biofuel\",STRUC.REFI).addInput(ITEMS.Biofuel,40).addInput(ITEMS.Canister,40).addOutput(ITEMS.PackBiofuel,40),\r\n\tnew Recipe(\"Pack Oil\",STRUC.REFI).addInput(ITEMS.CrudeOil,30).addInput(ITEMS.Canister,30).addOutput(ITEMS.PackOil,30),\r\n    new Recipe(\"Pack Heavy Oil Residue\",STRUC.REFI).addInput(ITEMS.HeavyOil,30).addInput(ITEMS.Canister,30).addOutput(ITEMS.PackHeavyOil,30),\r\n    new Recipe(\"Packaged Water\",STRUC.REFI).addInput(ITEMS.Water,60).addInput(ITEMS.Canister,60).addOutput(ITEMS.PackWater,60),\r\n]\r\n\r\nexport const itemObjArray = Object.values(ITEMS); // All the item objects\r\n\r\nexport function getItemsByCat(category) {\r\n    return itemObjArray.filter(v => v.category === category);\r\n}","import React from 'react'\r\n//Rete\r\nimport Rete from \"rete\";\r\nimport { setOutputMessage, determineIndex } from '../engine/helpers'\r\nimport { Node, Socket, Control } from 'rete-react-render-plugin';\r\n//Sockets and Controls\r\nimport { itemSocket, numSocket } from '../sockets/AllSockets'\r\nimport { ObjectDropControl } from '../controls/ObjectDropControl'\r\nimport { ButtonBarControl } from '../controls/ButtonBarControl'\r\nimport { getItemsByCat, CATS } from '../data/Items'\r\n\r\n\r\n\r\nexport class Miner extends Rete.Component {\r\n    constructor() {\r\n        super('Miner')\r\n        this.data.component = MinerNode;\r\n        this.purity = [\"Impure\", \"Normal\", \"Pure\"]\r\n        this.minerLevel = [\"Mk.1\", \"Mk.2\", \"Mk.3\"]\r\n    }\r\n\r\n    builder(node) {\r\n        const out = new Rete.Output(\"o1\", \"Output\", itemSocket, false);\r\n        const ores = getItemsByCat(CATS.ORE);\r\n        node.addOutput(out);\r\n        node.addControl(new ObjectDropControl(this.editor, \"item\", node, false, \"Item\", ores));\r\n        //node.addControl(new DropControl(this.editor, \"pty\", node, false,  \"Purity\", this.purity));\r\n        node.addControl(new ButtonBarControl(this.editor, \"pty\", node, false, this.purity));\r\n        node.addControl(new ButtonBarControl(this.editor, \"min\", node, false, this.minerLevel, \"0em 1.2em\"));\r\n        node.addInput(new Rete.Input(\"i1\", \"Overclock\", numSocket, false));\r\n        return node;\r\n    }\r\n\r\n    worker(node, inputs, outputs) {\r\n        var ptyMulti;\r\n        switch (node.data.pty) {\r\n            case this.purity[0]:\r\n                ptyMulti = 0.5; break;\r\n            case this.purity[1]:\r\n                ptyMulti = 1; break;\r\n            case this.purity[2]:\r\n                ptyMulti = 2; break;\r\n            default:\r\n                ptyMulti = 1; break;\r\n        }\r\n        var minMulti;\r\n        switch (node.data.min) {\r\n            case this.minerLevel[0]:\r\n                minMulti = 1; break;\r\n            case this.minerLevel[1]:\r\n                minMulti = 2; break;\r\n            case this.minerLevel[2]:\r\n                minMulti = 3; break;\r\n            default:\r\n                minMulti = 1; break;\r\n        }\r\n        var out = 60 * ptyMulti * minMulti;\r\n        out = inputs['i1'].length ? out * inputs['i1'] : out;\r\n\r\n        const array = [node.data.item, out];\r\n        outputs['o1'] = array;\r\n\r\n        setOutputMessage(node, this.editor, 'o1', out, array, false);\r\n    }\r\n}\r\n\r\nclass AdjustableNodePane extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.rotArray = [\"rotate(0deg)\", \"rotate(90deg)\", \"rotate(180deg)\", \"rotate(270deg)\",]\r\n        this.paneArray = [\"lrpane\", \"udpane\"];\r\n        this.nodeSizeArray = [\"min-lr\", \"min-ud\"];\r\n        this.positionArray = [\"left-socket\", \"top-socket\", \"right-socket\", \"bottom-socket-min\"];\r\n        //this.state = { transform: this.stateArray[0], }\r\n        var iniState = this.props.propShare.node.data.rotationState === undefined ? 0 : this.props.propShare.node.data.rotationState;\r\n\r\n        this.state = {\r\n            pane: this.paneArray[determineIndex(0 + iniState, this.paneArray.length)],\r\n            inPos: this.positionArray[determineIndex(0 + iniState, this.positionArray.length)],\r\n            otPos: this.positionArray[determineIndex(2 + iniState, this.positionArray.length)],\r\n            rotAdj: this.rotArray[determineIndex(0 + iniState, this.rotArray.length)],\r\n            nodeSz: this.nodeSizeArray[determineIndex(0 + iniState, this.nodeSizeArray.length)],\r\n        }\r\n        //this.stateArray = [\"0px\",\"20px\"];\r\n        //this.state = {margin: this.stateArray[0]};\r\n        this.handleRotate = this.handleRotate.bind(this);\r\n    }\r\n    // The problem is that this component cannot be clicked because it is behind the content pane\r\n    // So there needs to be another way to invoke this method from within this pane... hmm\r\n    // One way around that problem is to increase the scope of this class to include the content pane as well\r\n    //  Then the class will have direct access to the same pane that the user does, so it should be possible to invoke the method successfully.\r\n    handleRotate = (event) => {\r\n        if (event.key === 'r') {\r\n            //var idx = this.stateArray.findIndex((x) => x === this.state.transform);\r\n            //var idx = this.stateArray.findIndex((x)=>x===this.state.margin);\r\n            //alert(idx);\r\n            var idx1 = this.paneArray.findIndex((x) => x === this.state.pane);\r\n            idx1 = idx1 === this.paneArray.length - 1 ? 0 : ++idx1;\r\n\r\n            var idx2 = this.positionArray.findIndex((x) => x === this.state.inPos);\r\n            idx2 = idx2 === this.positionArray.length - 1 ? 0 : ++idx2;\r\n\r\n            var idx3 = this.positionArray.findIndex((x) => x === this.state.otPos);\r\n            idx3 = idx3 === this.positionArray.length - 1 ? 0 : ++idx3;\r\n\r\n            var idx4 = this.rotArray.findIndex((x) => x === this.state.rotAdj);\r\n            idx4 = idx4 === this.rotArray.length - 1 ? 0 : ++idx4;\r\n\r\n            var idx5 = this.nodeSizeArray.findIndex((x) => x === this.state.nodeSz);\r\n            idx5 = idx5 === this.nodeSizeArray.length - 1 ? 0 : ++idx5;\r\n\r\n            this.setState({\r\n                pane: this.paneArray[idx1],\r\n                inPos: this.positionArray[idx2],\r\n                otPos: this.positionArray[idx3],\r\n                rotAdj: this.rotArray[idx4],\r\n                nodeSz: this.nodeSizeArray[idx5],\r\n            });\r\n            //alert(this.stateArray[idx])\r\n            //this.setState({margin: this.stateArray[idx]});\r\n        }\r\n    }\r\n\r\n    componentDidUpdate() {\r\n        //console.log(JSON.stringify(window.rete_editor))\r\n        try {\r\n            setTimeout(() => {\r\n                let node = this.props.propShare.node;\r\n                window.rete_editor.view.updateConnections({ node });\r\n                var idx4 = this.rotArray.findIndex((x) => x === this.state.rotAdj);\r\n                node.data.rotationState = idx4;\r\n            }, 1000);\r\n\r\n        } catch {\r\n            return;\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const nodeTitleClass = this.props.nodeTitleClass;\r\n        const nodeLabel = this.props.nodeLabel;\r\n        const { node, bindSocket, bindControl } = this.props.propShare;\r\n        const { outputs, controls, inputs, selected } = this.props.stateShare;\r\n        return (\r\n            <div className={\"node-pane \" + this.state.nodeSz}>\r\n                <div className={\"socket-pane \" + this.state.pane}>\r\n                    <div className={this.state.otPos}>\r\n                        <Socket\r\n                            type=\"output\"\r\n                            socket={outputs[0].socket}\r\n                            io={outputs[0]}\r\n                            innerRef={bindSocket}\r\n                        />\r\n                    </div>\r\n                </div>\r\n                <div className=\"content-pane\" tabIndex=\"0\" onKeyPress={this.handleRotate} style={{ margin: \"4%\" }}>\r\n                    <div className={nodeTitleClass + \" ti-grad title-pane\"}>\r\n                        <div className=\"two-letter-label\">&nbsp;{nodeLabel}</div>\r\n                        {node.name}\r\n                    </div>\r\n                    <div className=\"label-pane\">\r\n                        <div className=\"label\">{outputs[0].name}</div>\r\n                        <div className=\"label\">\r\n                            <Control\r\n                                className=\"control\"\r\n                                key={controls[0].key}\r\n                                control={controls[0]}\r\n                                innerRef={bindControl}\r\n                            />\r\n                        </div>\r\n                        <div className=\"label\">\r\n                            <Control\r\n                                className=\"control\"\r\n                                key={controls[1].key}\r\n                                control={controls[1]}\r\n                                innerRef={bindControl}\r\n                            />\r\n                        </div>\r\n                        <div className=\"label\">\r\n                            <Control\r\n                                className=\"control\"\r\n                                key={controls[2].key}\r\n                                control={controls[2]}\r\n                                innerRef={bindControl}\r\n                            />\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"ovc-pane\">\r\n                        <Socket\r\n                            type=\"input\"\r\n                            socket={inputs[0].socket}\r\n                            io={inputs[0]}\r\n                            innerRef={bindSocket}\r\n                        />&nbsp;Overclock\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport class MinerNode extends Node {\r\n    nodeTitleClass = \"title-extractor\";\r\n    nodeLabel = \"Mi\";\r\n    render() {\r\n        //tabIndex=\"0\" onKeyDown={(e) => this.handleRotate(e)}   <-- this is how you can get a div to take focus and respond to events\r\n        return (\r\n            <AdjustableNodePane propShare={this.props} stateShare={this.state} nodeTitleClass={this.nodeTitleClass} nodeLabel={this.nodeLabel} />\r\n        );\r\n    }\r\n}","import React from 'react'\r\n//Rete\r\nimport Rete from \"rete\";\r\nimport { setOutputMessage, styleConnections, dataTypes, determineIndex } from '../engine/helpers'\r\nimport { Node, Socket, Control } from 'rete-react-render-plugin';\r\n//Sockets and Controls\r\nimport {numSocket, pipeSocket } from '../sockets/AllSockets'\r\nimport {ButtonBarControl } from '../controls/ButtonBarControl'\r\nimport { ObjectDropControl } from '../controls/ObjectDropControl'\r\nimport { ITEMS } from '../data/Items'\r\n\r\n\r\nexport class Extractor extends Rete.Component {\r\n    constructor() {\r\n        super('Fluid Extractor')\r\n        this.data.component = ExtractorNode;\r\n        this.purity = [\"Impure\",\"Normal\",\"Pure\"]\r\n    }\r\n\r\n    builder(node) {\r\n        const out = new Rete.Output(\"o1\", \"Output\", pipeSocket, false);\r\n        node.addOutput(out);\r\n        node.addControl(new ObjectDropControl(this.editor, \"item\", node, false, \"Fluid\", [ITEMS.Water, ITEMS.CrudeOil]));\r\n        node.addControl(new ButtonBarControl(this.editor,\"pty\",node,false,this.purity));\r\n        node.addInput(new Rete.Input(\"i1\",\"Overclock\",numSocket,false));\r\n        return node;\r\n    }\r\n\r\n    worker(node, inputs, outputs) {\r\n        var ptyMulti;\r\n        if(node.data.item===ITEMS.Water) {\r\n            ptyMulti=1;\r\n        } else {\r\n            switch (node.data.pty) {\r\n                case this.purity[0]:\r\n                    ptyMulti = 0.5; break;\r\n                case this.purity[1]:\r\n                    ptyMulti = 1; break;\r\n                case this.purity[2]:\r\n                    ptyMulti = 2; break;\r\n                default:\r\n                    ptyMulti = 1; break;\r\n            }\r\n        }\r\n\r\n        var out = 120 * ptyMulti;\r\n        out = inputs['i1'].length ? out * inputs['i1'] : out; \r\n\r\n        const array = [node.data.item, out];\r\n        outputs['o1'] = array;\r\n\r\n        setOutputMessage(node,this.editor,'o1',out,array,false);\r\n        styleConnections(node,this.editor,'o1',dataTypes.FLUID);\r\n    }\r\n}\r\n\r\nclass AdjustableNodePane extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.rotArray = [\"rotate(0deg)\", \"rotate(90deg)\", \"rotate(180deg)\", \"rotate(270deg)\",]\r\n        this.paneArray = [\"lrpane\",\"udpane\"];\r\n        this.nodeSizeArray = [\"ref-lr\",\"ref-ud\"];\r\n        this.positionArray = [\"left-socket\",\"top-socket\",\"right-socket\",\"bottom-socket-ref\"];\r\n        //this.state = { transform: this.stateArray[0], }\r\n        var iniState = this.props.propShare.node.data.rotationState === undefined ? 0 : this.props.propShare.node.data.rotationState;\r\n\r\n        this.state = {\r\n            pane: this.paneArray[determineIndex(0+iniState,this.paneArray.length)],\r\n            inPos: this.positionArray[determineIndex(0+iniState,this.positionArray.length)],\r\n            otPos: this.positionArray[determineIndex(2+iniState,this.positionArray.length)],\r\n            rotAdj: this.rotArray[determineIndex(0+iniState,this.rotArray.length)],\r\n            nodeSz: this.nodeSizeArray[determineIndex(0+iniState,this.nodeSizeArray.length)],\r\n        }\r\n        //this.stateArray = [\"0px\",\"20px\"];\r\n        //this.state = {margin: this.stateArray[0]};\r\n        this.handleRotate = this.handleRotate.bind(this);\r\n    }\r\n    // The problem is that this component cannot be clicked because it is behind the content pane\r\n    // So there needs to be another way to invoke this method from within this pane... hmm\r\n    // One way around that problem is to increase the scope of this class to include the content pane as well\r\n    //  Then the class will have direct access to the same pane that the user does, so it should be possible to invoke the method successfully.\r\n    handleRotate = (event) => {\r\n        if (event.key === 'r') {\r\n            //var idx = this.stateArray.findIndex((x) => x === this.state.transform);\r\n            //var idx = this.stateArray.findIndex((x)=>x===this.state.margin);\r\n            //alert(idx);\r\n            var idx1 = this.paneArray.findIndex((x)=> x===this.state.pane);\r\n            idx1 = idx1 === this.paneArray.length - 1 ? 0 : ++idx1;\r\n\r\n            var idx2 = this.positionArray.findIndex((x)=> x===this.state.inPos);\r\n            idx2 = idx2 === this.positionArray.length - 1 ? 0 : ++idx2;\r\n\r\n            var idx3 = this.positionArray.findIndex((x)=> x===this.state.otPos);\r\n            idx3 = idx3 === this.positionArray.length - 1 ? 0 : ++idx3;\r\n\r\n            var idx4 = this.rotArray.findIndex((x)=> x===this.state.rotAdj);\r\n            idx4 = idx4 === this.rotArray.length - 1 ? 0 : ++idx4;\r\n\r\n            var idx5 = this.nodeSizeArray.findIndex((x)=> x===this.state.nodeSz);\r\n            idx5 = idx5 === this.nodeSizeArray.length - 1 ? 0 : ++idx5;\r\n\r\n            this.setState({\r\n                pane: this.paneArray[idx1],\r\n                inPos: this.positionArray[idx2],\r\n                otPos: this.positionArray[idx3],\r\n                rotAdj: this.rotArray[idx4],\r\n                nodeSz: this.nodeSizeArray[idx5],\r\n            });\r\n            //alert(this.stateArray[idx])\r\n            //this.setState({margin: this.stateArray[idx]});\r\n        }\r\n    }\r\n    \r\n    componentDidUpdate() {\r\n        //console.log(JSON.stringify(window.rete_editor))\r\n        try {\r\n            setTimeout(() => {\r\n                let node = this.props.propShare.node;\r\n                window.rete_editor.view.updateConnections({ node });\r\n                var idx4 = this.rotArray.findIndex((x)=> x===this.state.rotAdj);\r\n                node.data.rotationState = idx4;\r\n            }, 1000);\r\n\r\n        } catch {\r\n            return;\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const nodeTitleClass = this.props.nodeTitleClass;\r\n        const nodeLabel = this.props.nodeLabel;\r\n        const { node, bindSocket, bindControl } = this.props.propShare;\r\n        const { outputs, controls, inputs, selected } = this.props.stateShare;\r\n        return (\r\n            <div className={\"node-pane \"+this.state.nodeSz}>\r\n                <div className={\"socket-pane \"+this.state.pane}>\r\n                    <div className={this.state.otPos}>\r\n                        <Socket\r\n                            type=\"output\"\r\n                            socket={outputs[0].socket}\r\n                            io={outputs[0]}\r\n                            innerRef={bindSocket}\r\n                        />\r\n                    </div>\r\n                </div>\r\n                <div className=\"content-pane\" tabIndex=\"0\" onKeyPress={this.handleRotate} style={{margin:\"4%\"}}>\r\n                    <div className={nodeTitleClass + \" ti-grad title-pane\"}>\r\n                        <div className=\"two-letter-label\">&nbsp;{nodeLabel}</div>\r\n                        {node.name}\r\n                    </div>\r\n                    <div className=\"label-pane\">\r\n                        <div className=\"label\">{outputs[0].name}</div>\r\n                        <div className=\"label\">\r\n                            <Control\r\n                                className=\"control\"\r\n                                key={controls[0].key}\r\n                                control={controls[0]}\r\n                                innerRef={bindControl}\r\n                            />\r\n                        </div>\r\n                        <div className=\"label\">\r\n                            <Control\r\n                                className=\"control\"\r\n                                key={controls[1].key}\r\n                                control={controls[1]}\r\n                                innerRef={bindControl}\r\n                            />\r\n                        </div>\r\n                        \r\n                    </div>\r\n                    <div className=\"ovc-pane\">\r\n                        <Socket\r\n                            type=\"input\"\r\n                            socket={inputs[0].socket}\r\n                            io={inputs[0]}\r\n                            innerRef={bindSocket}\r\n                        />&nbsp;Overclock\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport class ExtractorNode extends Node {\r\n    nodeTitleClass = \"title-extractor\";\r\n    nodeLabel = \"Ex\";\r\n    render() {\r\n        //tabIndex=\"0\" onKeyDown={(e) => this.handleRotate(e)}   <-- this is how you can get a div to take focus and respond to events\r\n        return (\r\n            <AdjustableNodePane propShare={this.props} stateShare={this.state} nodeTitleClass={this.nodeTitleClass} nodeLabel={this.nodeLabel}/>\r\n        );\r\n    }\r\n}","import React from 'react'\r\n//Rete\r\nimport Rete from \"rete\";\r\nimport { updateInputLabel, updateOutputLabel, determineIndex} from '../engine/helpers'\r\nimport { Node, Socket, Control } from 'rete-react-render-plugin';\r\n//Sockets and Controls\r\nimport { itemSocket, numSocket } from '../sockets/AllSockets'\r\nimport { ObjectDropControl } from '../controls/ObjectDropControl'\r\nimport { ConstructorRecipes } from '../data/Items'\r\n\r\nexport class Constructor extends Rete.Component {\r\n    constructor() {\r\n        super('Constructor')\r\n        this.data.component = ConstructorNode;\r\n    }\r\n\r\n    builder(node) {\r\n        node.addOutput(new Rete.Output(\"o1\", \"Output\", itemSocket, false));\r\n        node.addControl(new ObjectDropControl(this.editor, \"recipe\", node, false, \"Recipe\", ConstructorRecipes))\r\n        node.addInput(new Rete.Input(\"i1\", \"Input\", itemSocket, false));\r\n        node.addInput(new Rete.Input(\"ovc\", \"Overclock\", numSocket, false));\r\n        return node;\r\n    }\r\n\r\n    worker(node, inputs, outputs) {\r\n\r\n        var multi = inputs['ovc'].length ? inputs['ovc'] : 1;\r\n\r\n        const in1 = inputs['i1'].length ? inputs['i1'][0] : null;\r\n        var calcObject = node.data.recipe.calculate([in1], multi);\r\n        updateInputLabel(node, this.editor, 'i1', calcObject, 0);\r\n        updateOutputLabel(node, this.editor, 'o1', calcObject, 0);\r\n        outputs['o1'] = [node.data.recipe.outputs[0][0], calcObject.actualOutPpm[0]];\r\n    }\r\n}\r\n\r\n\r\n\r\nclass AdjustableNodePane extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.rotArray = [\"rotate(0deg)\", \"rotate(90deg)\", \"rotate(180deg)\", \"rotate(270deg)\",]\r\n        this.paneArray = [\"lrpane\",\"udpane\"];\r\n        this.positionArray = [\"left-socket\",\"top-socket\",\"right-socket\",\"bottom-socket\"];\r\n        //this.state = { transform: this.stateArray[0], }\r\n        var iniState = this.props.propShare.node.data.rotationState === undefined ? 0 : this.props.propShare.node.data.rotationState;\r\n\r\n        this.state = {\r\n            pane: this.paneArray[determineIndex(0+iniState,this.paneArray.length)],\r\n            inPos: this.positionArray[determineIndex(0+iniState,this.positionArray.length)],\r\n            otPos: this.positionArray[determineIndex(2+iniState,this.positionArray.length)],\r\n            rotAdj: this.rotArray[determineIndex(0+iniState,this.rotArray.length)],\r\n        }\r\n        //this.stateArray = [\"0px\",\"20px\"];\r\n        //this.state = {margin: this.stateArray[0]};\r\n        this.handleRotate = this.handleRotate.bind(this);\r\n    }\r\n    // The problem is that this component cannot be clicked because it is behind the content pane\r\n    // So there needs to be another way to invoke this method from within this pane... hmm\r\n    // One way around that problem is to increase the scope of this class to include the content pane as well\r\n    //  Then the class will have direct access to the same pane that the user does, so it should be possible to invoke the method successfully.\r\n    handleRotate = (event) => {\r\n        if (event.key === 'r') {\r\n            //var idx = this.stateArray.findIndex((x) => x === this.state.transform);\r\n            //var idx = this.stateArray.findIndex((x)=>x===this.state.margin);\r\n            //alert(idx);\r\n            var idx1 = this.paneArray.findIndex((x)=> x===this.state.pane);\r\n            idx1 = idx1 === this.paneArray.length - 1 ? 0 : ++idx1;\r\n\r\n            var idx2 = this.positionArray.findIndex((x)=> x===this.state.inPos);\r\n            idx2 = idx2 === this.positionArray.length - 1 ? 0 : ++idx2;\r\n\r\n            var idx3 = this.positionArray.findIndex((x)=> x===this.state.otPos);\r\n            idx3 = idx3 === this.positionArray.length - 1 ? 0 : ++idx3;\r\n\r\n            var idx4 = this.rotArray.findIndex((x)=> x===this.state.rotAdj);\r\n            idx4 = idx4 === this.rotArray.length - 1 ? 0 : ++idx4;\r\n\r\n            this.setState({\r\n                pane: this.paneArray[idx1],\r\n                inPos: this.positionArray[idx2],\r\n                otPos: this.positionArray[idx3],\r\n                rotAdj: this.rotArray[idx4],\r\n            });\r\n            //alert(this.stateArray[idx])\r\n            //this.setState({margin: this.stateArray[idx]});\r\n        }\r\n    }\r\n    \r\n    componentDidUpdate() {\r\n        //console.log(JSON.stringify(window.rete_editor))\r\n        try {\r\n            setTimeout(() => {\r\n                let node = this.props.propShare.node;\r\n                window.rete_editor.view.updateConnections({ node });\r\n                var idx4 = this.rotArray.findIndex((x)=> x===this.state.rotAdj);\r\n                node.data.rotationState = idx4;\r\n            }, 1000);\r\n\r\n        } catch {\r\n            return;\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const nodeTitleClass = this.props.nodeTitleClass;\r\n        const nodeLabel = this.props.nodeLabel;\r\n        const { node, bindSocket, bindControl } = this.props.propShare;\r\n        const { outputs, controls, inputs, selected } = this.props.stateShare;\r\n        return (\r\n            <div className=\"node-pane\">\r\n                <div className={\"socket-pane \"+this.state.pane}>\r\n                    <div className={this.state.inPos}>\r\n                        <Socket\r\n                            type=\"input\"\r\n                            socket={inputs[0].socket}\r\n                            io={inputs[0]}\r\n                            innerRef={bindSocket}\r\n                        />\r\n                    </div>\r\n                </div>\r\n                <div className={\"socket-pane \"+this.state.pane}>\r\n                    <div className={this.state.otPos}>\r\n                        <Socket\r\n                            type=\"output\"\r\n                            socket={outputs[0].socket}\r\n                            io={outputs[0]}\r\n                            innerRef={bindSocket}\r\n                        />\r\n                    </div>\r\n                </div>\r\n                <div className=\"content-pane\" tabIndex=\"0\" onKeyPress={this.handleRotate}>\r\n                    <div className={nodeTitleClass + \" ti-grad title-pane\"}>\r\n                        <div className=\"two-letter-label\">&nbsp;{nodeLabel}</div>\r\n                        {node.name}\r\n                    </div>\r\n                    <div className=\"label-pane\">\r\n                        <Control\r\n                            className=\"control\"\r\n                            key={controls[0].key}\r\n                            control={controls[0]}\r\n                            innerRef={bindControl}\r\n                        />\r\n                        <div className=\"label\">{inputs[0].name}</div>\r\n                        <div className=\"label\">{outputs[0].name}</div>\r\n                    </div>\r\n                    <div className=\"ovc-pane\">\r\n                        <Socket\r\n                            type=\"input\"\r\n                            socket={inputs[1].socket}\r\n                            io={inputs[1]}\r\n                            innerRef={bindSocket}\r\n                        />&nbsp;Overclock\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport class ConstructorNode extends Node {\r\n    nodeTitleClass = \"title-producer\";\r\n    nodeLabel = \"Co\";\r\n    render() {\r\n        //tabIndex=\"0\" onKeyDown={(e) => this.handleRotate(e)}   <-- this is how you can get a div to take focus and respond to events\r\n        return (\r\n            <AdjustableNodePane propShare={this.props} stateShare={this.state} nodeTitleClass={this.nodeTitleClass} nodeLabel={this.nodeLabel}/>\r\n        );\r\n    }\r\n}\r\n","//Rete\r\nimport Rete from \"rete\";\r\nimport {updateInputLabel, updateOutputLabel } from '../engine/helpers'\r\n//Sockets and Controls\r\nimport { itemSocket, numSocket } from '../sockets/AllSockets'\r\nimport { ObjectDropControl } from '../controls/ObjectDropControl'\r\nimport { SmelterRecipes } from '../data/Items'\r\n//import { ConstructorNode } from './Constructor'\r\nimport { ConstructorNode } from '../nodes/constructor2pt0'\r\n\r\nexport class Smelter extends Rete.Component {\r\n    constructor() {\r\n        super('Smelter')\r\n        this.data.component = SmelterNode;\r\n    }\r\n\r\n    builder(node) {\r\n        const out = new Rete.Output(\"o1\", \"Output\", itemSocket, false);\r\n        node.addOutput(out);\r\n        node.addControl(new ObjectDropControl(this.editor,\"recipe\",node,false,\"Recipe\",SmelterRecipes))\r\n        node.addInput(new Rete.Input(\"i1\",\"Input\",itemSocket,false));\r\n        node.addInput(new Rete.Input(\"ovc\",\"Overclock\",numSocket,false));\r\n\r\n        return node;\r\n    }\r\n\r\n    worker(node, inputs, outputs) {\r\n        var multi = inputs['ovc'].length ? inputs['ovc'] : 1;\r\n        \r\n        const in1 = inputs['i1'].length ? inputs['i1'][0] : null;\r\n        var calcObject = node.data.recipe.calculate([in1],multi);\r\n        updateInputLabel(node,this.editor,'i1',calcObject,0);\r\n        updateOutputLabel(node,this.editor,'o1',calcObject,0);\r\n        outputs['o1'] = [node.data.recipe.outputs[0][0],calcObject.actualOutPpm[0]];\r\n    }\r\n}\r\n\r\nclass SmelterNode extends ConstructorNode {\r\n    nodeTitleClass = \"title-smelter\";\r\n    nodeLabel = \"Sm\";\r\n}","import React from 'react'\r\n//Rete\r\nimport Rete from \"rete\";\r\nimport {updateInputLabel, updateOutputLabel, determineIndex} from '../engine/helpers'\r\nimport { Node, Socket, Control } from 'rete-react-render-plugin';\r\n//import { AssemblerNode } from './Assembler'\r\n//Sockets and Controls\r\nimport { itemSocket, numSocket } from '../sockets/AllSockets'\r\nimport { ObjectDropControl } from '../controls/ObjectDropControl'\r\nimport { FoundryRecipes } from '../data/Items'\r\n\r\nexport class Foundry extends Rete.Component {\r\n    constructor() {\r\n        super('Foundry')\r\n        this.data.component = FoundryNode;\r\n    }\r\n\r\n    builder(node) {\r\n        const out = new Rete.Output(\"o1\", \"Output\", itemSocket, false);\r\n        node.addOutput(out);\r\n        node.addControl(new ObjectDropControl(this.editor,\"recipe\",node,false,\"Recipe\",FoundryRecipes))\r\n        node.addInput(new Rete.Input(\"i1\",\"Input-1\",itemSocket,false));\r\n        node.addInput(new Rete.Input(\"i2\",\"Input-2\",itemSocket,false));\r\n        node.addInput(new Rete.Input(\"ovc\",\"Overclock\",numSocket,false));\r\n        return node;\r\n    }\r\n\r\n    worker(node, inputs, outputs) {\r\n        var multi = inputs['ovc'].length ? inputs['ovc'] : 1;\r\n\r\n        const in1 = inputs['i1'].length ? inputs['i1'][0] : null;\r\n        const in2 = inputs['i2'].length ? inputs['i2'][0] : null;\r\n        var calcObject = node.data.recipe.calculate([in1,in2],multi);\r\n        updateInputLabel(node,this.editor,'i1',calcObject,0);\r\n        updateInputLabel(node,this.editor,'i2',calcObject,1);\r\n        updateOutputLabel(node,this.editor,'o1',calcObject,0);\r\n        outputs['o1'] = [node.data.recipe.outputs[0][0],calcObject.actualOutPpm[0]];\r\n    }\r\n}\r\n\r\nclass AdjustableNodePane extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.rotArray = [\"rotate(0deg)\", \"rotate(90deg)\", \"rotate(180deg)\", \"rotate(270deg)\",]\r\n        this.paneArray = [\"lrpane\",\"udpane\"];\r\n        this.positionArray = [\"left-socket\",\"top-socket\",\"right-socket\",\"bottom-socket\"];\r\n        //this.state = { transform: this.stateArray[0], }\r\n        var iniState = this.props.propShare.node.data.rotationState === undefined ? 0 : this.props.propShare.node.data.rotationState;\r\n\r\n        this.state = {\r\n            pane: this.paneArray[determineIndex(0+iniState,this.paneArray.length)],\r\n            inPos: this.positionArray[determineIndex(0+iniState,this.positionArray.length)],\r\n            otPos: this.positionArray[determineIndex(2+iniState,this.positionArray.length)],\r\n            rotAdj: this.rotArray[determineIndex(0+iniState,this.rotArray.length)],\r\n        }\r\n        //this.stateArray = [\"0px\",\"20px\"];\r\n        //this.state = {margin: this.stateArray[0]};\r\n        this.handleRotate = this.handleRotate.bind(this);\r\n    }\r\n    // The problem is that this component cannot be clicked because it is behind the content pane\r\n    // So there needs to be another way to invoke this method from within this pane... hmm\r\n    // One way around that problem is to increase the scope of this class to include the content pane as well\r\n    //  Then the class will have direct access to the same pane that the user does, so it should be possible to invoke the method successfully.\r\n    handleRotate = (event) => {\r\n        if (event.key === 'r') {\r\n            //var idx = this.stateArray.findIndex((x) => x === this.state.transform);\r\n            //var idx = this.stateArray.findIndex((x)=>x===this.state.margin);\r\n            //alert(idx);\r\n            var idx1 = this.paneArray.findIndex((x)=> x===this.state.pane);\r\n            idx1 = idx1 === this.paneArray.length - 1 ? 0 : ++idx1;\r\n\r\n            var idx2 = this.positionArray.findIndex((x)=> x===this.state.inPos);\r\n            idx2 = idx2 === this.positionArray.length - 1 ? 0 : ++idx2;\r\n\r\n            var idx3 = this.positionArray.findIndex((x)=> x===this.state.otPos);\r\n            idx3 = idx3 === this.positionArray.length - 1 ? 0 : ++idx3;\r\n\r\n            var idx4 = this.rotArray.findIndex((x)=> x===this.state.rotAdj);\r\n            idx4 = idx4 === this.rotArray.length - 1 ? 0 : ++idx4;\r\n\r\n            this.setState({\r\n                pane: this.paneArray[idx1],\r\n                inPos: this.positionArray[idx2],\r\n                otPos: this.positionArray[idx3],\r\n                rotAdj: this.rotArray[idx4],\r\n            });\r\n            //alert(this.stateArray[idx])\r\n            //this.setState({margin: this.stateArray[idx]});\r\n        }\r\n    }\r\n    \r\n    componentDidUpdate() {\r\n        //console.log(JSON.stringify(window.rete_editor))\r\n        try {\r\n            setTimeout(() => {\r\n                let node = this.props.propShare.node;\r\n                window.rete_editor.view.updateConnections({ node });\r\n                var idx4 = this.rotArray.findIndex((x)=> x===this.state.rotAdj);\r\n                node.data.rotationState = idx4;\r\n            }, 1000);\r\n\r\n        } catch {\r\n            return;\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const nodeTitleClass = this.props.nodeTitleClass;\r\n        const nodeLabel = this.props.nodeLabel;\r\n        const { node, bindSocket, bindControl } = this.props.propShare;\r\n        const { outputs, controls, inputs, selected } = this.props.stateShare;\r\n        return (\r\n            <div className=\"node-pane\" style={{width:\"288px\",height:\"288px\"}}>\r\n                <div className={\"socket-pane \"+this.state.pane}>\r\n                    <div className={this.state.inPos}>\r\n                        <Socket\r\n                            type=\"input\"\r\n                            socket={inputs[0].socket}\r\n                            io={inputs[0]}\r\n                            innerRef={bindSocket}\r\n                        />\r\n                    </div>\r\n                    <div className={this.state.inPos}>\r\n                        <Socket\r\n                            type=\"input\"\r\n                            socket={inputs[1].socket}\r\n                            io={inputs[1]}\r\n                            innerRef={bindSocket}\r\n                        />\r\n                    </div>\r\n                </div>\r\n                <div className={\"socket-pane \"+this.state.pane}>\r\n                    <div className={this.state.otPos}>\r\n                        <Socket\r\n                            type=\"output\"\r\n                            socket={outputs[0].socket}\r\n                            io={outputs[0]}\r\n                            innerRef={bindSocket}\r\n                        />\r\n                    </div>\r\n                </div>\r\n                <div className=\"content-pane\" tabIndex=\"0\" onKeyPress={this.handleRotate}>\r\n                    <div className={nodeTitleClass + \" ti-grad title-pane\"}>\r\n                        <div className=\"two-letter-label\">&nbsp;{nodeLabel}</div>\r\n                        {node.name}\r\n                    </div>\r\n                    <div className=\"label-pane\">\r\n                        <Control\r\n                            className=\"control\"\r\n                            key={controls[0].key}\r\n                            control={controls[0]}\r\n                            innerRef={bindControl}\r\n                        />\r\n                        <div className=\"label\">{inputs[0].name}</div>\r\n                        <div className=\"label\">{inputs[1].name}</div>\r\n                        <div className=\"label\">{outputs[0].name}</div>\r\n                    </div>\r\n                    <div className=\"ovc-pane\">\r\n                        <Socket\r\n                            type=\"input\"\r\n                            socket={inputs[2].socket}\r\n                            io={inputs[2]}\r\n                            innerRef={bindSocket}\r\n                        />&nbsp;Overclock\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport class FoundryNode extends Node {\r\n    nodeTitleClass = \"title-smelter\";\r\n    nodeLabel = \"Fo\";\r\n    render() {\r\n        //tabIndex=\"0\" onKeyDown={(e) => this.handleRotate(e)}   <-- this is how you can get a div to take focus and respond to events\r\n        return (\r\n            <AdjustableNodePane propShare={this.props} stateShare={this.state} nodeTitleClass={this.nodeTitleClass} nodeLabel={this.nodeLabel}/>\r\n        );\r\n    }\r\n}","import React from 'react'\r\n//Rete\r\nimport Rete from \"rete\";\r\nimport {updateInputLabel, updateOutputLabel, determineIndex} from '../engine/helpers'\r\nimport { Node, Socket, Control } from 'rete-react-render-plugin';\r\n//Sockets and Controls\r\nimport { itemSocket, numSocket } from '../sockets/AllSockets'\r\nimport { ObjectDropControl } from '../controls/ObjectDropControl'\r\nimport { AssemblerRecipes } from '../data/Items'\r\n\r\nexport class Assembler extends Rete.Component {\r\n    constructor() {\r\n        super('Assembler')\r\n        this.data.component = AssemblerNode;\r\n    }\r\n\r\n    builder(node) {\r\n        const out = new Rete.Output(\"o1\", \"Output\", itemSocket, false);\r\n        node.addOutput(out);\r\n        node.addControl(new ObjectDropControl(this.editor,\"recipe\",node,false,\"Recipe\",AssemblerRecipes))\r\n        node.addInput(new Rete.Input(\"i1\",\"Input-1\",itemSocket,false));\r\n        node.addInput(new Rete.Input(\"i2\",\"Input-2\",itemSocket,false));\r\n        node.addInput(new Rete.Input(\"ovc\",\"Overclock\",numSocket,false));\r\n        return node;\r\n    }\r\n\r\n    worker(node, inputs, outputs) {\r\n        // 28-77\r\n        var multi = inputs['ovc'].length ? inputs['ovc'] : 1;\r\n\r\n        const in1 = inputs['i1'].length ? inputs['i1'][0] : null;\r\n        const in2 = inputs['i2'].length ? inputs['i2'][0] : null;\r\n        var calcObject = node.data.recipe.calculate([in1,in2],multi);\r\n        updateInputLabel(node,this.editor,'i1',calcObject,0);\r\n        updateInputLabel(node,this.editor,'i2',calcObject,1);\r\n        updateOutputLabel(node,this.editor,'o1',calcObject,0);\r\n        outputs['o1'] = [node.data.recipe.outputs[0][0],calcObject.actualOutPpm[0]];\r\n    }\r\n}\r\n\r\nclass AdjustableNodePane extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.rotArray = [\"rotate(0deg)\", \"rotate(90deg)\", \"rotate(180deg)\", \"rotate(270deg)\",]\r\n        this.paneArray = [\"lrpane\",\"udpane\"];\r\n        this.nodeSizeArray = [\"asy-lr\",\"asy-ud\"];\r\n        this.positionArray = [\"left-socket\",\"top-socket\",\"right-socket\",\"bottom-socket-asy\"];\r\n        //this.state = { transform: this.stateArray[0], }\r\n        var iniState = this.props.propShare.node.data.rotationState === undefined ? 0 : this.props.propShare.node.data.rotationState;\r\n\r\n        this.state = {\r\n            pane: this.paneArray[determineIndex(0+iniState,this.paneArray.length)],\r\n            inPos: this.positionArray[determineIndex(0+iniState,this.positionArray.length)],\r\n            otPos: this.positionArray[determineIndex(2+iniState,this.positionArray.length)],\r\n            rotAdj: this.rotArray[determineIndex(0+iniState,this.rotArray.length)],\r\n            nodeSz: this.nodeSizeArray[determineIndex(0+iniState,this.nodeSizeArray.length)],\r\n        }\r\n        //this.stateArray = [\"0px\",\"20px\"];\r\n        //this.state = {margin: this.stateArray[0]};\r\n        this.handleRotate = this.handleRotate.bind(this);\r\n    }\r\n    // The problem is that this component cannot be clicked because it is behind the content pane\r\n    // So there needs to be another way to invoke this method from within this pane... hmm\r\n    // One way around that problem is to increase the scope of this class to include the content pane as well\r\n    //  Then the class will have direct access to the same pane that the user does, so it should be possible to invoke the method successfully.\r\n    handleRotate = (event) => {\r\n        if (event.key === 'r') {\r\n            //var idx = this.stateArray.findIndex((x) => x === this.state.transform);\r\n            //var idx = this.stateArray.findIndex((x)=>x===this.state.margin);\r\n            //alert(idx);\r\n            var idx1 = this.paneArray.findIndex((x)=> x===this.state.pane);\r\n            idx1 = idx1 === this.paneArray.length - 1 ? 0 : ++idx1;\r\n\r\n            var idx2 = this.positionArray.findIndex((x)=> x===this.state.inPos);\r\n            idx2 = idx2 === this.positionArray.length - 1 ? 0 : ++idx2;\r\n\r\n            var idx3 = this.positionArray.findIndex((x)=> x===this.state.otPos);\r\n            idx3 = idx3 === this.positionArray.length - 1 ? 0 : ++idx3;\r\n\r\n            var idx4 = this.rotArray.findIndex((x)=> x===this.state.rotAdj);\r\n            idx4 = idx4 === this.rotArray.length - 1 ? 0 : ++idx4;\r\n\r\n            var idx5 = this.nodeSizeArray.findIndex((x)=> x===this.state.nodeSz);\r\n            idx5 = idx5 === this.nodeSizeArray.length - 1 ? 0 : ++idx5;\r\n\r\n            this.setState({\r\n                pane: this.paneArray[idx1],\r\n                inPos: this.positionArray[idx2],\r\n                otPos: this.positionArray[idx3],\r\n                rotAdj: this.rotArray[idx4],\r\n                nodeSz: this.nodeSizeArray[idx5],\r\n            });\r\n            //alert(this.stateArray[idx])\r\n            //this.setState({margin: this.stateArray[idx]});\r\n        }\r\n    }\r\n    \r\n    componentDidUpdate() {\r\n        //console.log(JSON.stringify(window.rete_editor))\r\n        try {\r\n            setTimeout(() => {\r\n                let node = this.props.propShare.node;\r\n                window.rete_editor.view.updateConnections({ node });\r\n                var idx4 = this.rotArray.findIndex((x)=> x===this.state.rotAdj);\r\n                node.data.rotationState = idx4;\r\n            }, 1000);\r\n\r\n        } catch {\r\n            return;\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const nodeTitleClass = this.props.nodeTitleClass;\r\n        const nodeLabel = this.props.nodeLabel;\r\n        const { node, bindSocket, bindControl } = this.props.propShare;\r\n        const { outputs, controls, inputs, selected } = this.props.stateShare;\r\n        return (\r\n            <div className={\"node-pane \"+this.state.nodeSz}>\r\n                <div className={\"socket-pane \"+this.state.pane}>\r\n                    <div className={this.state.inPos}>\r\n                        <Socket\r\n                            type=\"input\"\r\n                            socket={inputs[0].socket}\r\n                            io={inputs[0]}\r\n                            innerRef={bindSocket}\r\n                        />\r\n                        \r\n                    </div>\r\n                    <div className={this.state.inPos}>\r\n                        <Socket\r\n                            type=\"input\"\r\n                            socket={inputs[1].socket}\r\n                            io={inputs[1]}\r\n                            innerRef={bindSocket}\r\n                        />\r\n                    </div>\r\n                </div>\r\n                <div className={\"socket-pane \"+this.state.pane}>\r\n                    <div className={this.state.otPos}>\r\n                        <Socket\r\n                            type=\"output\"\r\n                            socket={outputs[0].socket}\r\n                            io={outputs[0]}\r\n                            innerRef={bindSocket}\r\n                        />\r\n                    </div>\r\n                </div>\r\n                <div className=\"content-pane\" tabIndex=\"0\" onKeyPress={this.handleRotate} style={{margin:\"4%\"}}>\r\n                    <div className={nodeTitleClass + \" ti-grad title-pane\"}>\r\n                        <div className=\"two-letter-label\">&nbsp;{nodeLabel}</div>\r\n                        {node.name}\r\n                    </div>\r\n                    <div className=\"label-pane\">\r\n                        <Control\r\n                            className=\"control\"\r\n                            key={controls[0].key}\r\n                            control={controls[0]}\r\n                            innerRef={bindControl}\r\n                        />\r\n                        <div className=\"label\">{inputs[0].name}</div>\r\n                        <div className=\"label\">{inputs[1].name}</div>\r\n                        <div className=\"label\">{outputs[0].name}</div>\r\n                    </div>\r\n                    <div className=\"ovc-pane\">\r\n                        <Socket\r\n                            type=\"input\"\r\n                            socket={inputs[2].socket}\r\n                            io={inputs[2]}\r\n                            innerRef={bindSocket}\r\n                        />&nbsp;Overclock\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport class AssemblerNode extends Node {\r\n    nodeTitleClass = \"title-producer\";\r\n    nodeLabel = \"As\";\r\n    render() {\r\n        //tabIndex=\"0\" onKeyDown={(e) => this.handleRotate(e)}   <-- this is how you can get a div to take focus and respond to events\r\n        return (\r\n            <AdjustableNodePane propShare={this.props} stateShare={this.state} nodeTitleClass={this.nodeTitleClass} nodeLabel={this.nodeLabel}/>\r\n        );\r\n    }\r\n}","import React from 'react'\r\n//Rete\r\nimport Rete from \"rete\";\r\nimport {updateInputLabel, updateOutputLabel, setLabel, determineIndex} from '../engine/helpers'\r\nimport { Node, Socket, Control } from 'rete-react-render-plugin';\r\n//Sockets and Controls\r\nimport { itemSocket, numSocket } from '../sockets/AllSockets'\r\nimport { ObjectDropControl } from '../controls/ObjectDropControl'\r\nimport { ManufacturerRecipes } from '../data/Items'\r\n\r\nexport class Manufacturer extends Rete.Component {\r\n    constructor() {\r\n        super('Manufacturer')\r\n        this.data.component = ManufacturerNode;\r\n    }\r\n\r\n    builder(node) {\r\n        const out = new Rete.Output(\"o1\", \"Output\", itemSocket, false);\r\n        node.addOutput(out);\r\n        node.addControl(new ObjectDropControl(this.editor,\"recipe\",node,false,\"Recipe\",ManufacturerRecipes))\r\n        node.addInput(new Rete.Input(\"i1\",\"Input-1\",itemSocket,false));\r\n        node.addInput(new Rete.Input(\"i2\",\"Input-2\",itemSocket,false));\r\n        node.addInput(new Rete.Input(\"i3\",\"Input-3\",itemSocket,false));\r\n        node.addInput(new Rete.Input(\"i4\",\"Input-4\",itemSocket,false));\r\n        node.addInput(new Rete.Input(\"ovc\",\"Overclock\",numSocket,false));\r\n        return node;\r\n    }\r\n\r\n    worker(node, inputs, outputs) {\r\n        // 28-77\r\n        var multi = inputs['ovc'].length ? inputs['ovc'] : 1;\r\n\r\n        const in1 = inputs['i1'].length ? inputs['i1'][0] : null;\r\n        const in2 = inputs['i2'].length ? inputs['i2'][0] : null;\r\n        const in3 = inputs['i3'].length ? inputs['i3'][0] : null;\r\n        const in4 = inputs['i4'].length ? inputs['i4'][0] : null;\r\n        var calcObject = node.data.recipe.calculate([in1,in2,in3,in4],multi);\r\n        updateInputLabel(node,this.editor,'i1',calcObject,0);\r\n        updateInputLabel(node,this.editor,'i2',calcObject,1);\r\n        updateInputLabel(node,this.editor,'i3',calcObject,2);\r\n        if(node.data.recipe.inputs.length === 3){\r\n            setLabel(node,this.editor,true,'i4','N/A');\r\n        }else{\r\n            updateInputLabel(node,this.editor,'i4',calcObject,3);\r\n        }\r\n        updateOutputLabel(node,this.editor,'o1',calcObject,0);\r\n        outputs['o1'] = [node.data.recipe.outputs[0][0],calcObject.actualOutPpm[0]];\r\n    }\r\n}\r\n\r\nclass AdjustableNodePane extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.rotArray = [\"rotate(0deg)\", \"rotate(90deg)\", \"rotate(180deg)\", \"rotate(270deg)\",]\r\n        this.paneArray = [\"lrpane\",\"udpane\"];\r\n        this.positionArray = [\"left-socket\",\"top-socket\",\"right-socket\",\"bottom-socket-man\"];\r\n        //this.state = { transform: this.stateArray[0], }\r\n        var iniState = this.props.propShare.node.data.rotationState === undefined ? 0 : this.props.propShare.node.data.rotationState;\r\n\r\n        this.state = {\r\n            pane: this.paneArray[determineIndex(0+iniState,this.paneArray.length)],\r\n            inPos: this.positionArray[determineIndex(0+iniState,this.positionArray.length)],\r\n            otPos: this.positionArray[determineIndex(2+iniState,this.positionArray.length)],\r\n            rotAdj: this.rotArray[determineIndex(0+iniState,this.rotArray.length)],\r\n        }\r\n        //this.stateArray = [\"0px\",\"20px\"];\r\n        //this.state = {margin: this.stateArray[0]};\r\n        this.handleRotate = this.handleRotate.bind(this);\r\n    }\r\n    // The problem is that this component cannot be clicked because it is behind the content pane\r\n    // So there needs to be another way to invoke this method from within this pane... hmm\r\n    // One way around that problem is to increase the scope of this class to include the content pane as well\r\n    //  Then the class will have direct access to the same pane that the user does, so it should be possible to invoke the method successfully.\r\n    handleRotate = (event) => {\r\n        if (event.key === 'r') {\r\n            //var idx = this.stateArray.findIndex((x) => x === this.state.transform);\r\n            //var idx = this.stateArray.findIndex((x)=>x===this.state.margin);\r\n            //alert(idx);\r\n            var idx1 = this.paneArray.findIndex((x)=> x===this.state.pane);\r\n            idx1 = idx1 === this.paneArray.length - 1 ? 0 : ++idx1;\r\n\r\n            var idx2 = this.positionArray.findIndex((x)=> x===this.state.inPos);\r\n            idx2 = idx2 === this.positionArray.length - 1 ? 0 : ++idx2;\r\n\r\n            var idx3 = this.positionArray.findIndex((x)=> x===this.state.otPos);\r\n            idx3 = idx3 === this.positionArray.length - 1 ? 0 : ++idx3;\r\n\r\n            var idx4 = this.rotArray.findIndex((x)=> x===this.state.rotAdj);\r\n            idx4 = idx4 === this.rotArray.length - 1 ? 0 : ++idx4;\r\n\r\n            this.setState({\r\n                pane: this.paneArray[idx1],\r\n                inPos: this.positionArray[idx2],\r\n                otPos: this.positionArray[idx3],\r\n                rotAdj: this.rotArray[idx4],\r\n            });\r\n            //alert(this.stateArray[idx])\r\n            //this.setState({margin: this.stateArray[idx]});\r\n        }\r\n    }\r\n    \r\n    componentDidUpdate() {\r\n        //console.log(JSON.stringify(window.rete_editor))\r\n        try {\r\n            setTimeout(() => {\r\n                let node = this.props.propShare.node;\r\n                window.rete_editor.view.updateConnections({ node });\r\n                var idx4 = this.rotArray.findIndex((x)=> x===this.state.rotAdj);\r\n                node.data.rotationState = idx4;\r\n            }, 1000);\r\n\r\n        } catch {\r\n            return;\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const nodeTitleClass = this.props.nodeTitleClass;\r\n        const nodeLabel = this.props.nodeLabel;\r\n        const { node, bindSocket, bindControl } = this.props.propShare;\r\n        const { outputs, controls, inputs, selected } = this.props.stateShare;\r\n        return (\r\n            <div className=\"node-pane\" style={{width:\"518px\",height:\"518px\"}}>\r\n                <div className={\"socket-pane \"+this.state.pane}>\r\n                    <div className={this.state.inPos}>\r\n                        <Socket\r\n                            type=\"input\"\r\n                            socket={inputs[0].socket}\r\n                            io={inputs[0]}\r\n                            innerRef={bindSocket}\r\n                        />\r\n                    </div>\r\n                    <div className={this.state.inPos}>\r\n                        <Socket\r\n                            type=\"input\"\r\n                            socket={inputs[1].socket}\r\n                            io={inputs[1]}\r\n                            innerRef={bindSocket}\r\n                        />\r\n                    </div>\r\n                    <div className={this.state.inPos}>\r\n                        <Socket\r\n                            type=\"input\"\r\n                            socket={inputs[2].socket}\r\n                            io={inputs[2]}\r\n                            innerRef={bindSocket}\r\n                        />\r\n                    </div>\r\n                    <div className={this.state.inPos}>\r\n                        <Socket\r\n                            type=\"input\"\r\n                            socket={inputs[3].socket}\r\n                            io={inputs[3]}\r\n                            innerRef={bindSocket}\r\n                        />\r\n                    </div>\r\n                </div>\r\n                <div className={\"socket-pane \"+this.state.pane}>\r\n                    <div className={this.state.otPos}>\r\n                        <Socket\r\n                            type=\"output\"\r\n                            socket={outputs[0].socket}\r\n                            io={outputs[0]}\r\n                            innerRef={bindSocket}\r\n                        />\r\n                    </div>\r\n                </div>\r\n                <div className=\"content-pane\" tabIndex=\"0\" onKeyPress={this.handleRotate}>\r\n                    <div className={nodeTitleClass + \" ti-grad title-pane\"}>\r\n                        <div className=\"two-letter-label\">&nbsp;{nodeLabel}</div>\r\n                        {node.name}\r\n                    </div>\r\n                    <div className=\"label-pane\">\r\n                        <Control\r\n                            className=\"control\"\r\n                            key={controls[0].key}\r\n                            control={controls[0]}\r\n                            innerRef={bindControl}\r\n                        />\r\n                        <div className=\"label\">{inputs[0].name}</div>\r\n                        <div className=\"label\">{inputs[1].name}</div>\r\n                        <div className=\"label\">{inputs[2].name}</div>\r\n                        <div className=\"label\">{inputs[3].name}</div>\r\n                        <div className=\"label\">{outputs[0].name}</div>\r\n                    </div>\r\n                    <div className=\"ovc-pane\">\r\n                        <Socket\r\n                            type=\"input\"\r\n                            socket={inputs[4].socket}\r\n                            io={inputs[4]}\r\n                            innerRef={bindSocket}\r\n                        />&nbsp;Overclock\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport class ManufacturerNode extends Node {\r\n    nodeTitleClass = \"title-producer\";\r\n    nodeLabel = \"Ma\";\r\n    render() {\r\n        //tabIndex=\"0\" onKeyDown={(e) => this.handleRotate(e)}   <-- this is how you can get a div to take focus and respond to events\r\n        return (\r\n            <AdjustableNodePane propShare={this.props} stateShare={this.state} nodeTitleClass={this.nodeTitleClass} nodeLabel={this.nodeLabel}/>\r\n        );\r\n    }\r\n}\r\n","import React from 'react'\r\n//Rete\r\nimport Rete from \"rete\";\r\nimport { updateInputLabel, updateOutputLabel, setLabel, determineIndex } from '../engine/helpers'\r\nimport { Node, Socket, Control } from 'rete-react-render-plugin';\r\n//Sockets and Controls\r\nimport { itemSocket, numSocket, pipeSocket } from '../sockets/AllSockets'\r\nimport { ObjectDropControl } from '../controls/ObjectDropControl'\r\nimport { RefineryRecipes } from '../data/Items'\r\n\r\nexport class Refinery extends Rete.Component {\r\n    constructor() {\r\n        super('Refinery')\r\n        this.data.component = RefineryNode;\r\n    }\r\n\r\n    builder(node) {\r\n        node.addOutput(new Rete.Output(\"o1\", \"Output\", itemSocket, false));\r\n        node.addOutput(new Rete.Output(\"o2\", \"Output\", pipeSocket, false));\r\n        node.addControl(new ObjectDropControl(this.editor,\"recipe\",node,false,\"Recipe\",RefineryRecipes))\r\n        node.addInput(new Rete.Input(\"i1\",\"Input-1\",itemSocket,false));\r\n        node.addInput(new Rete.Input(\"i2\",\"Input-2\",pipeSocket,false));\r\n        node.addInput(new Rete.Input(\"ovc\",\"Overclock\",numSocket,false));\r\n        return node;\r\n    }\r\n\r\n    worker(node, inputs, outputs) {\r\n        var multi = inputs['ovc'].length ? inputs['ovc'] : 1;\r\n\r\n        const in1 = inputs['i1'].length ? inputs['i1'][0] : null;\r\n        const in2 = inputs['i2'].length ? inputs['i2'][0] : null;\r\n        var calcObject = node.data.recipe.calculate([in1,in2],multi);\r\n        \r\n        setLabel(node,this.editor,true,'i1','N/A');\r\n        setLabel(node,this.editor,true,'i2','N/A');\r\n        setLabel(node,this.editor,false,'o1','N/A');\r\n        setLabel(node,this.editor,false,'o2','N/A');\r\n        // Inputs\r\n        if(node.data.recipe.inputs[0][0].isAFluid()){\r\n            updateInputLabel(node,this.editor,'i2',calcObject,0);\r\n        } else {\r\n            updateInputLabel(node,this.editor,'i1',calcObject,0);\r\n        }\r\n        if(node.data.recipe.inputs.length===2){\r\n            if(node.data.recipe.inputs[1][0].isAFluid()){\r\n                updateInputLabel(node,this.editor,'i2',calcObject,1);\r\n            }else{\r\n                updateInputLabel(node,this.editor,'i1',calcObject,1);\r\n            }\r\n        }\r\n        // Outputs\r\n        if(node.data.recipe.outputs[0][0].isAFluid()){\r\n            updateOutputLabel(node,this.editor,'o2',calcObject,0);\r\n            outputs['o2'] = [node.data.recipe.outputs[0][0],calcObject.actualOutPpm[0]];\r\n        } else {\r\n            updateOutputLabel(node,this.editor,'o1',calcObject,0);\r\n            outputs['o1'] = [node.data.recipe.outputs[0][0],calcObject.actualOutPpm[0]];\r\n        }\r\n        if(node.data.recipe.outputs.length===2){\r\n            if(node.data.recipe.outputs[1][0].isAFluid()){\r\n                updateOutputLabel(node,this.editor,'o2',calcObject,1);\r\n                outputs['o2'] = [node.data.recipe.outputs[1][0],calcObject.actualOutPpm[1]];\r\n            }else{\r\n                updateOutputLabel(node,this.editor,'o1',calcObject,1);\r\n                outputs['o1'] = [node.data.recipe.outputs[1][0],calcObject.actualOutPpm[1]];\r\n            }\r\n        }\r\n        \r\n    }\r\n}\r\n\r\n\r\nclass AdjustableNodePane extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.rotArray = [\"rotate(0deg)\", \"rotate(90deg)\", \"rotate(180deg)\", \"rotate(270deg)\",]\r\n        this.paneArray = [\"lrpane\",\"udpane\"];\r\n        this.nodeSizeArray = [\"ref-lr\",\"ref-ud\"];\r\n        this.positionArray = [\"left-socket\",\"top-socket\",\"right-socket\",\"bottom-socket-ref\"];\r\n        //this.state = { transform: this.stateArray[0], }\r\n        var iniState = this.props.propShare.node.data.rotationState === undefined ? 0 : this.props.propShare.node.data.rotationState;\r\n\r\n        this.state = {\r\n            pane: this.paneArray[determineIndex(0+iniState,this.paneArray.length)],\r\n            inPos: this.positionArray[determineIndex(0+iniState,this.positionArray.length)],\r\n            otPos: this.positionArray[determineIndex(2+iniState,this.positionArray.length)],\r\n            rotAdj: this.rotArray[determineIndex(0+iniState,this.rotArray.length)],\r\n            nodeSz: this.nodeSizeArray[determineIndex(0+iniState,this.nodeSizeArray.length)],\r\n        }\r\n        //this.stateArray = [\"0px\",\"20px\"];\r\n        //this.state = {margin: this.stateArray[0]};\r\n        this.handleRotate = this.handleRotate.bind(this);\r\n    }\r\n    // The problem is that this component cannot be clicked because it is behind the content pane\r\n    // So there needs to be another way to invoke this method from within this pane... hmm\r\n    // One way around that problem is to increase the scope of this class to include the content pane as well\r\n    //  Then the class will have direct access to the same pane that the user does, so it should be possible to invoke the method successfully.\r\n    handleRotate = (event) => {\r\n        if (event.key === 'r') {\r\n            //var idx = this.stateArray.findIndex((x) => x === this.state.transform);\r\n            //var idx = this.stateArray.findIndex((x)=>x===this.state.margin);\r\n            //alert(idx);\r\n            var idx1 = this.paneArray.findIndex((x)=> x===this.state.pane);\r\n            idx1 = idx1 === this.paneArray.length - 1 ? 0 : ++idx1;\r\n\r\n            var idx2 = this.positionArray.findIndex((x)=> x===this.state.inPos);\r\n            idx2 = idx2 === this.positionArray.length - 1 ? 0 : ++idx2;\r\n\r\n            var idx3 = this.positionArray.findIndex((x)=> x===this.state.otPos);\r\n            idx3 = idx3 === this.positionArray.length - 1 ? 0 : ++idx3;\r\n\r\n            var idx4 = this.rotArray.findIndex((x)=> x===this.state.rotAdj);\r\n            idx4 = idx4 === this.rotArray.length - 1 ? 0 : ++idx4;\r\n\r\n            var idx5 = this.nodeSizeArray.findIndex((x)=> x===this.state.nodeSz);\r\n            idx5 = idx5 === this.nodeSizeArray.length - 1 ? 0 : ++idx5;\r\n\r\n            this.setState({\r\n                pane: this.paneArray[idx1],\r\n                inPos: this.positionArray[idx2],\r\n                otPos: this.positionArray[idx3],\r\n                rotAdj: this.rotArray[idx4],\r\n                nodeSz: this.nodeSizeArray[idx5],\r\n            });\r\n            //alert(this.stateArray[idx])\r\n            //this.setState({margin: this.stateArray[idx]});\r\n        }\r\n    }\r\n    \r\n    componentDidUpdate() {\r\n        //console.log(JSON.stringify(window.rete_editor))\r\n        try {\r\n            setTimeout(() => {\r\n                let node = this.props.propShare.node;\r\n                window.rete_editor.view.updateConnections({ node });\r\n                var idx4 = this.rotArray.findIndex((x)=> x===this.state.rotAdj);\r\n                node.data.rotationState = idx4;\r\n            }, 1000);\r\n\r\n        } catch {\r\n            return;\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const nodeTitleClass = this.props.nodeTitleClass;\r\n        const nodeLabel = this.props.nodeLabel;\r\n        const { node, bindSocket, bindControl } = this.props.propShare;\r\n        const { outputs, controls, inputs, selected } = this.props.stateShare;\r\n        return (\r\n            <div className={\"node-pane \"+this.state.nodeSz}>\r\n                <div className={\"socket-pane \"+this.state.pane}>\r\n                    <div className={this.state.inPos}>\r\n                        <Socket\r\n                            type=\"input\"\r\n                            socket={inputs[0].socket}\r\n                            io={inputs[0]}\r\n                            innerRef={bindSocket}\r\n                        />\r\n                        \r\n                    </div>\r\n                    <div className={this.state.inPos}>\r\n                        <Socket\r\n                            type=\"input\"\r\n                            socket={inputs[1].socket}\r\n                            io={inputs[1]}\r\n                            innerRef={bindSocket}\r\n                        />\r\n                    </div>\r\n                </div>\r\n                <div className={\"socket-pane \"+this.state.pane}>\r\n                    <div className={this.state.otPos}>\r\n                        <Socket\r\n                            type=\"output\"\r\n                            socket={outputs[0].socket}\r\n                            io={outputs[0]}\r\n                            innerRef={bindSocket}\r\n                        />\r\n                    </div>\r\n                    <div className={this.state.otPos}>\r\n                        <Socket\r\n                            type=\"output\"\r\n                            socket={outputs[1].socket}\r\n                            io={outputs[1]}\r\n                            innerRef={bindSocket}\r\n                        />\r\n                    </div>\r\n                </div>\r\n                <div className=\"content-pane\" tabIndex=\"0\" onKeyPress={this.handleRotate} style={{margin:\"4%\"}}>\r\n                    <div className={nodeTitleClass + \" ti-grad title-pane\"}>\r\n                        <div className=\"two-letter-label\">&nbsp;{nodeLabel}</div>\r\n                        {node.name}\r\n                    </div>\r\n                    <div className=\"label-pane\">\r\n                        <Control\r\n                            className=\"control\"\r\n                            key={controls[0].key}\r\n                            control={controls[0]}\r\n                            innerRef={bindControl}\r\n                        />\r\n                        <div className=\"label\">{inputs[0].name}</div>\r\n                        <div className=\"label\">{inputs[1].name}</div>\r\n                        <div className=\"label\">{outputs[0].name}</div>\r\n                        <div className=\"label\">{outputs[1].name}</div>\r\n                    </div>\r\n                    <div className=\"ovc-pane\">\r\n                        <Socket\r\n                            type=\"input\"\r\n                            socket={inputs[2].socket}\r\n                            io={inputs[2]}\r\n                            innerRef={bindSocket}\r\n                        />&nbsp;Overclock\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport class RefineryNode extends Node {\r\n    nodeTitleClass = \"title-producer\";\r\n    nodeLabel = \"Re\";\r\n    render() {\r\n        //tabIndex=\"0\" onKeyDown={(e) => this.handleRotate(e)}   <-- this is how you can get a div to take focus and respond to events\r\n        return (\r\n            <AdjustableNodePane propShare={this.props} stateShare={this.state} nodeTitleClass={this.nodeTitleClass} nodeLabel={this.nodeLabel}/>\r\n        );\r\n    }\r\n}","import React from \"react\";\r\nimport Rete from \"rete\";\r\n\r\n\r\nexport class OverclockControl extends Rete.Control {\r\n    static component = ({ value, onChange }) => (\r\n        <span><input\r\n            type=\"number\"\r\n            value={value}\r\n            min=\"0\"\r\n            max=\"250\"\r\n            onChange={e => onChange(+e.target.value)}\r\n            onPointerMove={e => e.stopPropagation()}\r\n        />&nbsp;%</span>\r\n    );\r\n\r\n    constructor(emitter, key, node, readonly = false) {\r\n        super(key);\r\n        this.emitter = emitter;\r\n        this.key = key;\r\n        this.component = OverclockControl.component;\r\n\r\n        const initial = node.data[key] || 100;\r\n\r\n        node.data[key] = initial;\r\n        this.props = {\r\n            readonly,\r\n            value: initial,\r\n            onChange: v => {\r\n                this.setValue(v);\r\n                this.emitter.trigger(\"process\");\r\n            }\r\n        };\r\n    }\r\n\r\n    setValue(val) {\r\n        val = val > 250 ? 250 : val;\r\n        val = val < 0 ? 0 : val;\r\n        this.props.value = val+'';\r\n        this.putData(this.key, val);\r\n        this.update();\r\n    }\r\n\r\n}","import React from 'react'\r\n//Rete\r\nimport Rete from \"rete\";\r\nimport { Node, Socket, Control } from 'rete-react-render-plugin';\r\n//Sockets and Controls\r\nimport { numSocket } from '../sockets/AllSockets'\r\nimport { OverclockControl } from '../controls/OverclockControl'\r\n\r\n\r\nexport class Overclock extends Rete.Component {\r\n    constructor() {\r\n        super('Overclock')\r\n        this.data.component = OverclockNode;\r\n    }\r\n\r\n    builder(node) {\r\n        node.addOutput(new Rete.Output(\"o1\", \"Output\", numSocket, true));\r\n        node.addControl(new OverclockControl(this.editor, \"ovc\", node, false));\r\n        return node;\r\n    }\r\n\r\n    worker(node, inputs, outputs) {\r\n        outputs['o1'] = [node.data.ovc/100];\r\n    }\r\n}\r\n\r\n\r\nexport class OverclockNode extends Node {\r\n    nodeTitleClass = \"title-logistics\";\r\n    nodeLabel = \"Ov\";\r\n    render() {\r\n        const { node, bindSocket, bindControl } = this.props;\r\n        const { outputs, controls, inputs, selected } = this.state;\r\n        return (\r\n            <div className=\"node-pane\" style={{width:\"200px\", height:\"100px\",}}>\r\n                <div className={\"socket-pane lrpane\"}>\r\n                    <div className=\"right-socket\">\r\n                        <Socket\r\n                            type=\"output\"\r\n                            socket={outputs[0].socket}\r\n                            io={outputs[0]}\r\n                            innerRef={bindSocket}\r\n                        />\r\n                    </div>\r\n                </div>\r\n                <div className=\"content-pane\" style={{height:\"80%\"}}>\r\n                    <div className={this.nodeTitleClass + \" ti-grad title-pane\"}>\r\n                        <div className=\"two-letter-label\">&nbsp;{this.nodeLabel}</div>\r\n                        {node.name}\r\n                    </div>\r\n                    <div className=\"label-pane\">\r\n                        <div className=\"label\">\r\n                            <Control\r\n                                className=\"control\"\r\n                                key={controls[0].key}\r\n                                control={controls[0]}\r\n                                innerRef={bindControl}\r\n                            />\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n","import React from 'react';\r\n//Rete\r\nimport Rete from \"rete\";\r\nimport { Node, Socket, Control } from 'rete-react-render-plugin';\r\n//Sockets and Controls\r\nimport {anySocket} from '../sockets/AllSockets'\r\nimport {NumControl} from '../controls/NumControl'\r\nimport { ObjectDropControl } from '../controls/ObjectDropControl'\r\nimport {itemObjArray} from '../data/Items'\r\n\r\nexport class Starter extends Rete.Component {\r\n    constructor() {\r\n        super('Creative')\r\n        this.data.component = StarterNode;\r\n    }\r\n\r\n    builder(node) {\r\n        node.addOutput(new Rete.Output(\"o1\",\"Output\",anySocket));\r\n        node.addControl(new ObjectDropControl(this.editor,\"item\",node,false,\"Item\",itemObjArray));\r\n        node.addControl(new NumControl(this.editor,\"num\",node));\r\n        \r\n\r\n        return node;\r\n    }\r\n\r\n    worker(node,inputs,outputs) {\r\n        const array = [node.data.item,node.data.num];\r\n        outputs['o1'] = array;\r\n    }\r\n}\r\n\r\nclass StarterNode extends Node {\r\n    nodeTitleClass = \"title-logistics\";\r\n    nodeLabel = \"Cr\";\r\n    render() {\r\n        const { node, bindSocket, bindControl } = this.props;\r\n        const { outputs, controls, inputs, selected } = this.state;\r\n        return (\r\n            <div className=\"node-pane\" style={{width:\"250px\", height:\"120px\",}}>\r\n                <div className={\"socket-pane lrpane\"}>\r\n                    <div className=\"right-socket\">\r\n                        <Socket\r\n                            type=\"output\"\r\n                            socket={outputs[0].socket}\r\n                            io={outputs[0]}\r\n                            innerRef={bindSocket}\r\n                        />\r\n                    </div>\r\n                </div>\r\n                <div className=\"content-pane\" style={{margin:\"1% 5%\"}}>\r\n                    <div className={this.nodeTitleClass + \" ti-grad title-pane\"}>\r\n                        <div className=\"two-letter-label\">&nbsp;{this.nodeLabel}</div>\r\n                        {node.name}\r\n                    </div>\r\n                    <div className=\"label-pane\">\r\n                        <div className=\"label\">\r\n                            <Control\r\n                                className=\"control\"\r\n                                key={controls[0].key}\r\n                                control={controls[0]}\r\n                                innerRef={bindControl}\r\n                            />\r\n                        </div>\r\n                        <div className=\"label\">\r\n                            <Control\r\n                                className=\"control\"\r\n                                key={controls[1].key}\r\n                                control={controls[1]}\r\n                                innerRef={bindControl}\r\n                            />\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}","import React from 'react'\r\n//Rete\r\nimport Rete from \"rete\";\r\nimport { updateInputLabel, updateOutputLabel, determineIndex} from '../engine/helpers'\r\nimport { Node, Socket, Control } from 'rete-react-render-plugin';\r\n//Sockets and Controls\r\nimport { anySocket } from '../sockets/AllSockets'\r\nimport { ObjectDropControl } from '../controls/ObjectDropControl'\r\nimport { ConstructorRecipes } from '../data/Items'\r\n\r\nexport class ConnectionPoint extends Rete.Component {\r\n    constructor() {\r\n        super('Junction')\r\n        this.data.component = PointNode;\r\n    }\r\n\r\n    builder(node) {\r\n        node.addOutput(new Rete.Output(\"o1\", \"Output\", anySocket, false));\r\n        node.addInput(new Rete.Input(\"i1\", \"Input\", anySocket, false));\r\n        return node;\r\n    }\r\n\r\n    worker(node, inputs, outputs) {\r\n        const in1 = inputs['i1'].length ? inputs['i1'][0] : null;\r\n        outputs['o1'] = in1;\r\n    }\r\n}\r\n\r\nclass AdjustableNodePane extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.rotArray = [\"rotate(0deg)\", \"rotate(90deg)\", \"rotate(180deg)\", \"rotate(270deg)\",]\r\n        this.paneArray = [\"lrpane\",\"udpane\"];\r\n        this.positionArray = [\"left-socket\",\"top-socket\",\"right-socket-pnt\",\"bottom-socket-pnt\"];\r\n        //this.state = { transform: this.stateArray[0], }\r\n        var iniState = this.props.propShare.node.data.rotationState === undefined ? 0 : this.props.propShare.node.data.rotationState;\r\n\r\n        this.state = {\r\n            pane: this.paneArray[determineIndex(0+iniState,this.paneArray.length)],\r\n            inPos: this.positionArray[determineIndex(0+iniState,this.positionArray.length)],\r\n            otPos: this.positionArray[determineIndex(2+iniState,this.positionArray.length)],\r\n            rotAdj: this.rotArray[determineIndex(0+iniState,this.rotArray.length)],\r\n        }\r\n        //this.stateArray = [\"0px\",\"20px\"];\r\n        //this.state = {margin: this.stateArray[0]};\r\n        this.handleRotate = this.handleRotate.bind(this);\r\n    }\r\n    // The problem is that this component cannot be clicked because it is behind the content pane\r\n    // So there needs to be another way to invoke this method from within this pane... hmm\r\n    // One way around that problem is to increase the scope of this class to include the content pane as well\r\n    //  Then the class will have direct access to the same pane that the user does, so it should be possible to invoke the method successfully.\r\n    handleRotate = (event) => {\r\n        if (event.key === 'r') {\r\n            //var idx = this.stateArray.findIndex((x) => x === this.state.transform);\r\n            //var idx = this.stateArray.findIndex((x)=>x===this.state.margin);\r\n            //alert(idx);\r\n            var idx1 = this.paneArray.findIndex((x)=> x===this.state.pane);\r\n            idx1 = idx1 === this.paneArray.length - 1 ? 0 : ++idx1;\r\n\r\n            var idx2 = this.positionArray.findIndex((x)=> x===this.state.inPos);\r\n            idx2 = idx2 === this.positionArray.length - 1 ? 0 : ++idx2;\r\n\r\n            var idx3 = this.positionArray.findIndex((x)=> x===this.state.otPos);\r\n            idx3 = idx3 === this.positionArray.length - 1 ? 0 : ++idx3;\r\n\r\n            var idx4 = this.rotArray.findIndex((x)=> x===this.state.rotAdj);\r\n            idx4 = idx4 === this.rotArray.length - 1 ? 0 : ++idx4;\r\n\r\n            this.setState({\r\n                pane: this.paneArray[idx1],\r\n                inPos: this.positionArray[idx2],\r\n                otPos: this.positionArray[idx3],\r\n                rotAdj: this.rotArray[idx4],\r\n            });\r\n            //alert(this.stateArray[idx])\r\n            //this.setState({margin: this.stateArray[idx]});\r\n        }\r\n    }\r\n    \r\n    componentDidUpdate() {\r\n        //console.log(JSON.stringify(window.rete_editor))\r\n        try {\r\n            setTimeout(() => {\r\n                let node = this.props.propShare.node;\r\n                window.rete_editor.view.updateConnections({ node });\r\n                var idx4 = this.rotArray.findIndex((x)=> x===this.state.rotAdj);\r\n                node.data.rotationState = idx4;\r\n            }, 1000);\r\n\r\n        } catch {\r\n            return;\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const nodeTitleClass = this.props.nodeTitleClass;\r\n        const nodeLabel = this.props.nodeLabel;\r\n        const { node, bindSocket, bindControl } = this.props.propShare;\r\n        const { outputs, controls, inputs, selected } = this.props.stateShare;\r\n        return (\r\n            <div className=\"node-pane\" style={{width:\"40px\", height:\"40px\", borderRadius:\"25px\", backgroundColor:\"#777\"}}>\r\n                <div className={\"socket-pane \"+this.state.pane}>\r\n                    <div className={this.state.inPos}>\r\n                        <Socket\r\n                            type=\"input\"\r\n                            socket={inputs[0].socket}\r\n                            io={inputs[0]}\r\n                            innerRef={bindSocket}\r\n                        />\r\n                    </div>\r\n                </div>\r\n                <div className={\"socket-pane \"+this.state.pane}>\r\n                    <div className={this.state.otPos}>\r\n                        <Socket\r\n                            type=\"output\"\r\n                            socket={outputs[0].socket}\r\n                            io={outputs[0]}\r\n                            innerRef={bindSocket}\r\n                        />\r\n                    </div>\r\n                </div>\r\n                <div className=\"content-pane\" tabIndex=\"0\" onKeyPress={this.handleRotate}>\r\n                    <img src=\"./resources/arrow.png\" width=\"20px\" height=\"20px\" style={{transform: this.state.rotAdj, alignSelf:\"center\",marginTop:\"25%\"}} draggable=\"false\" />\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport class PointNode extends Node {\r\n    nodeTitleClass = \"title-producer\";\r\n    nodeLabel = \"Co\";\r\n    render() {\r\n        //tabIndex=\"0\" onKeyDown={(e) => this.handleRotate(e)}   <-- this is how you can get a div to take focus and respond to events\r\n        return (\r\n            <AdjustableNodePane propShare={this.props} stateShare={this.state} nodeTitleClass={this.nodeTitleClass} nodeLabel={this.nodeLabel}/>\r\n        );\r\n    }\r\n}\r\n","import React from 'react'\r\n\r\nexport class ComponentDock extends React.Component {\r\n    constructor (props) {\r\n        super(props);\r\n        this.componentArray = props.componentArray;\r\n    }\r\n\r\n    handleDrag(e,name) {\r\n        if(!e.dataTransfer) return;\r\n        e.dataTransfer.setData('componentName',name);\r\n    }\r\n\r\n    render() {\r\n        let componentPlaceholders = this.componentArray.map(comp =>\r\n        <div className=\"dock-item\" draggable={true} key={comp.name} onDragStart={(e)=>this.handleDrag(e,comp.name)}>{comp.name}</div>\r\n        )\r\n        return (\r\n        <div>\r\n            <div className=\"dock-message\">Click and drag a component into the editor to add a node for that structure.</div>\r\n            {componentPlaceholders}\r\n        </div>\r\n    )}\r\n}\r\n","// Final Factory Components Import\r\nimport { Storage } from '../nodes/storage2pt0'\r\n//import { Splitter } from '../factorynodes/Splitter'\r\nimport { Splitter } from '../nodes/splitter2pt0'\r\n//import { Merger } from '../factorynodes/Merger'\r\nimport { Merger } from '../nodes/merger2pt0'\r\nimport { Miner } from '../nodes/miner2pt0'\r\nimport { Extractor } from '../nodes/extractor2pt0'\r\nimport { Smelter } from '../factorynodes/Smelter'\r\n//import { Foundry } from '../factorynodes/Foundry'\r\nimport { Foundry } from  '../nodes/foundary2pt0'\r\n//import { Constructor } from '../factorynodes/Constructor'\r\n//import { Assembler } from '../factorynodes/Assembler'\r\nimport {Assembler} from '../nodes/assembler2pt0'\r\n//import { Manufacturer } from '../factorynodes/Manufacturer'\r\nimport { Manufacturer } from  '../nodes/Manufacturer2pt0'\r\n//import { Refinery } from '../factorynodes/Refinery'\r\nimport { Refinery } from '../nodes/refinery2pt0'\r\nimport { Overclock } from '../nodes/overclock2pt0'\r\n// Test Components Import\r\nimport { Starter } from '../nodes/StarterNode'\r\nimport { Constructor } from '../nodes/constructor2pt0'\r\nimport { ConnectionPoint } from '../nodes/point2pt0'\r\n// Other imports\r\nimport { ComponentDock } from './dock'\r\nimport React from 'react'\r\nimport ReactDOM from 'react-dom'\r\n// END imports\r\n\r\nexport async function initialize(engine, editor) {\r\n    const components = [new Miner(), new Extractor(), new Smelter(), new Foundry(), new Constructor(), new Assembler(), new Manufacturer(), new Refinery(), new Splitter(), new Merger(), new Storage(), new Starter(), new Overclock(), new ConnectionPoint()];\r\n    // Register Components with the engine\r\n    components.map(c => {\r\n        editor.register(c);\r\n        engine.register(c);\r\n        return null;\r\n    });\r\n\r\n    const dock = <ComponentDock componentArray={components} />;\r\n    ReactDOM.render(dock,document.querySelector('.leftbar'));\r\n\r\n    var lz = require('lz-string');\r\n        //var text = lz.decompressFromEncodedURIComponent(this.state.currentEditorState);\r\n    fetch('resources/starting_view.txt')\r\n        .then((r) => r.text())\r\n        .then((data) =>{\r\n            editor.fromJSON(JSON.parse(lz.decompressFromEncodedURIComponent(data)));\r\n    })\r\n    \r\n    \r\n\r\n}","// Rete and Plugins\r\nimport ReactRenderPlugin from \"rete-react-render-plugin\";\r\nimport ConnectionPlugin from \"rete-connection-plugin\";\r\n//import DockPlugin from \"rete-dock-plugin\"\r\nimport AreaPlugin from \"rete-area-plugin\";\r\nimport ContextMenuPlugin from 'rete-context-menu-plugin';\r\n//import ConnectionReroutePlugin from 'rete-connection-reroute-plugin';\r\nimport ConnectionPathPlugin from 'rete-connection-path-plugin';\r\nimport Rete, { Connection } from \"rete\";\r\n// React\r\nimport React, { Component } from \"react\";\r\nimport ReactDOM from 'react-dom';\r\n// Custom Components\r\nimport { initialize } from './ComponentStage';\r\nimport '../backgroundStyle.sass';\r\n// Material UI\r\nimport { BlueButton } from './material-ui-components'\r\n\r\n\r\nclass Editor extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.editor = null;\r\n        this.engine = null;\r\n    }\r\n\r\n\r\n    createEditor = async (container) => {\r\n        this.engine = new Rete.Engine(\"satisflow@0.5.0\");\r\n        this.editor = new Rete.NodeEditor(\"satisflow@0.5.0\", container);\r\n        window.rete_editor = this.editor;\r\n        this.editor.use(ConnectionPlugin);\r\n        this.editor.use(ReactRenderPlugin);\r\n        \r\n        this.editor.use(ConnectionPathPlugin, {\r\n            type: ConnectionPathPlugin.DEFAULT, // DEFAULT or LINEAR transformer\r\n            //transformer: () => ([x1, y1, x2, y2]) => [[x1, y1], [x2, y2]], // optional, custom transformer\r\n            curve: ConnectionPathPlugin.curveBundle, // curve identifier\r\n            options: { vertical: false, curvature: 0.1 }, // optional\r\n            //arrow: { color: 'steelblue', marker: 'M-5,-10 L-5,10 L20,0 z' }\r\n        });\r\n\r\n        //this.editor.use(ConnectionReroutePlugin); // this is not working.. could be because the connection path plugin is also installed? \r\n\r\n        this.editor.use(ContextMenuPlugin, {\r\n            searchBar: false, // true by default\r\n            searchKeep: title => true, // leave item when searching, optional. For example, title => ['Refresh'].includes(title)\r\n            delay: 100,\r\n        });\r\n        /*\r\n        this.editor.use(DockPlugin,{\r\n            container: document.querySelector('.leftbar'),\r\n            itemClass: 'dock-item',\r\n            plugins: [ReactRenderPlugin]\r\n        });\r\n        */\r\n        //this.editor.use(DockPlugin);\r\n\r\n        container.classList.add('custom-node-editor');\r\n        const background = document.createElement('div');\r\n        background.classList = 'background';\r\n        this.editor.use(AreaPlugin, { background });\r\n\r\n        initialize(this.engine, this.editor); // Register and Create Initial Components\r\n\r\n        this.editor.on('error', err => alert(err));\r\n\r\n        this.editor.on(\r\n            \"process nodecreated noderemoved connectioncreated connectionremoved\",\r\n            async (output) => {\r\n                await this.engine.abort();\r\n                await this.engine.process(this.editor.toJSON());\r\n                if (output.output !== undefined) {\r\n                    let node = output.output.node;\r\n                    setTimeout(() => {\r\n                        this.editor.view.updateConnections({ node });\r\n                    }, 1000);\r\n\r\n                }\r\n            }\r\n        );\r\n/*\r\n        this.editor.on('renderconnection', (connection) => {\r\n            const key = connection.connection.output.key;\r\n            const node = connection.connection.output.node;\r\n            const type = node.outputs.get(key).socket.name;\r\n            var connClass;\r\n            if (type === \"pipe\") {\r\n                connClass = \"fluid-connection\";\r\n\r\n            }else if (type === \"number\") {\r\n                connClass = \"ovc-connection\";\r\n            }\r\n            var c = connection.el.children;\r\n            for (var i = 0; i < c.length; i++) {\r\n                c[i].children[0].classList.add(connClass);\r\n            }\r\n\r\n        })\r\n*/\r\n        this.editor.on('connectionpath',(data)=>{\r\n            const {\r\n                points, // array of numbers, e.g. [x1, y1, x2, y2]\r\n                connection, // Rete.Connection instance\r\n                d // string, d attribute of <path>\r\n            } = data;\r\n            if(connection!==undefined){\r\n                const key = connection.output.key;\r\n                const node = connection.output.node;\r\n                const type = node.outputs.get(key).socket.name;\r\n                \r\n                if(type===\"number\"){\r\n                    const [x1, y1, x2, y2] = points;\r\n                    const hx1 = x1 + Math.abs(x2 - x1) * 0.3;\r\n                    const hx2 = x2 - Math.abs(x2 - x1) * 0.3;\r\n                    data.d = `M ${x1} ${y1} C ${hx1} ${y1} ${hx2} ${y2} ${x2+12} ${y2+12} `;\r\n                }\r\n            }\r\n\r\n        })\r\n        addDropStrategy(this.editor);\r\n\r\n        this.editor.view.resize();\r\n        this.editor.trigger(\"process\");\r\n        const { area } = this.editor.view;\r\n        area.zoom(0.7, 500, 400)\r\n\r\n        ReactDOM.render(<SaveLoadComponent mainEditor={this} />, document.querySelector('.right-menu'));\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div ref={ref => this.createEditor(ref)} />\r\n        );\r\n    }\r\n}\r\n\r\n\r\nexport default Editor;\r\n\r\n\r\n\r\nfunction addDropStrategy(editor) {\r\n    editor.view.container.addEventListener('dragover', e => e.preventDefault())\r\n    editor.view.container.addEventListener('drop', async e => {\r\n        if (!e.dataTransfer) return;\r\n\r\n        const name = e.dataTransfer.getData('componentName');\r\n        const component = editor.components.get(name)\r\n\r\n        if (!component) return;\r\n\r\n        // force update the mouse position\r\n        editor.view.area.pointermove(e);\r\n        const node = await createNode(component, editor.view.area.mouse);\r\n\r\n        editor.addNode(node)\r\n    })\r\n}\r\n\r\n\r\nasync function createNode(component, position) {\r\n    let node = await component.createNode({});\r\n\r\n    node.position = [position.x, position.y];\r\n\r\n    return node;\r\n}\r\n\r\nclass SaveLoadComponent extends React.Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.mainEditor = this.props.mainEditor;\r\n        this.state = { currentEditorState: \"Click the Export Data button to retrieve text that is representative of the current layout. You can reload that text later as a way of saving and loading your work.\" };\r\n        this.handleLoad = this.handleLoad.bind(this);\r\n        this.handleStore = this.handleStore.bind(this);\r\n        this.handleChange = this.handleChange.bind(this);\r\n        this.handleRefresh = this.handleRefresh.bind(this);\r\n        this.handleClear = this.handleClear.bind(this);\r\n        this.abort = this.abort.bind(this);\r\n    }\r\n\r\n    handleStore() {\r\n        var lz = require('lz-string');\r\n        //const text = JSON.stringify(this.mainEditor.editor.toJSON());\r\n        //const text = toHexString(lz.compressToUint8Array(JSON.stringify(this.mainEditor.editor.toJSON())));\r\n        const text = lz.compressToEncodedURIComponent(JSON.stringify(this.mainEditor.editor.toJSON()));\r\n\r\n        this.setState({ currentEditorState: text });\r\n    }\r\n\r\n    handleLoad() {\r\n        var json = \"\";\r\n        var lz = require('lz-string');\r\n        var text = lz.decompressFromEncodedURIComponent(this.state.currentEditorState);\r\n        try {\r\n            json = JSON.parse(text);\r\n        } catch (err) {\r\n            alert(err.message);\r\n        } finally {\r\n            if (json) {\r\n                this.mainEditor.editor.fromJSON(json);\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n    handleChange(event) {\r\n        this.setState({ currentEditorState: event.target.value })\r\n    }\r\n\r\n    async applyToEditor(thisobj, json) {\r\n        await thisobj.mainEditor.engine.abort();\r\n        await thisobj.mainEditor.engine.process(json);\r\n    }\r\n\r\n    async abort() {\r\n        await this.mainEditor.engine.abort();\r\n    }\r\n\r\n    handleRefresh() {\r\n        //this.mainEditor.editor.fromJSON(this.mainEditor.editor.toJSON());\r\n        var thisJson = this.mainEditor.editor.toJSON();\r\n        var storedJson = JSON.stringify(thisJson);\r\n        thisJson.nodes = {}\r\n        this.mainEditor.editor.fromJSON(thisJson);\r\n        alert('Refreshing editor.')\r\n        this.mainEditor.editor.fromJSON(JSON.parse(storedJson));\r\n    }\r\n\r\n    handleClear() {\r\n        this.abort();\r\n        var thisJson = this.mainEditor.editor.toJSON();\r\n        thisJson.nodes = {}\r\n        this.mainEditor.editor.fromJSON(thisJson);\r\n    }\r\n\r\n    render() {\r\n\r\n        return (\r\n            //<button className = \"slider\" onClick={this.handleStore}>Export Data</button>\r\n            <div>\r\n                <BlueButton variant=\"contained\" color=\"primary\" onClick={this.handleStore}>Export Data</BlueButton>\r\n                <textarea rows=\"4\" columns=\"50\" style={{ width: \"150px\", height: \"600px\" }} value={this.state.currentEditorState} onChange={this.handleChange} />\r\n                <BlueButton variant=\"contained\" color=\"primary\" onClick={this.handleLoad}>Restore Data</BlueButton>\r\n                <BlueButton variant=\"contained\" color=\"primary\" onClick={this.handleClear}>Clear Editor</BlueButton>\r\n            </div>\r\n        )\r\n    }\r\n}","import React from 'react';\r\nimport './App2.scss';\r\nimport NodeEditor from './engine/ReteEngine';\r\nimport { version } from './version'\r\n\r\nfunction App() {\r\n  let nodeEditor = <NodeEditor />;\r\n  return (\r\n    <div className=\"wrapper\">\r\n      <div className=\"topbar\">\r\n        <div className=\"logo\">SATISFLOW</div>\r\n        <div className=\"tip\">Tip: Right click a node to delete, or clone it to make a copy. Right click the in the editor to quick-create a node.</div>\r\n      </div>\r\n      <div className=\"rows\">\r\n        <div className=\"sidebar leftbar\"></div>\r\n        <div className=\"canvas\">{nodeEditor}</div>\r\n        <div className=\"sidebar right-menu\"></div>\r\n      </div>\r\n      <div className=\"bottombar\">\r\n        <p className=\"bottom-link\">&copy; Copyright 2020 by Joseph Cosentino&emsp;<a style={{color:\"lightyellow\"}} href=\"https://github.com/Photon-Engineer/Satisflow\">Github Project and Documentation</a>&nbsp;Version {version}&nbsp;<DonateButton /></p>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n\r\nclass DonateButton extends React.Component {\r\n  render() {\r\n    return (\r\n      <form style={{display:\"inline\"}} action=\"https://www.paypal.com/cgi-bin/webscr?cmd=_donations&business=2DS93F4W6JQKQ&currency_code=USD&source=url\" target=\"_blank\">\r\n          <input type=\"hidden\" name=\"cmd\" value=\"_donations\" />\r\n          <input type=\"hidden\" name=\"business\" value=\"2DS93F4W6JQKQ\" />\r\n          <input type=\"hidden\" name=\"currency_code\" value=\"USD\" />\r\n          <button className=\"donateButton\" title=\"PayPal - The safer, easier way to pay online!\">Donate with Paypal</button>\r\n      </form>\r\n    )\r\n  }\r\n}\r\n\r\nexport default App;\r\n\r\n\r\n","export const version = \"2.0.0\";\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App';\r\n\r\nReactDOM.render(<App/>, document.getElementById('root'));"],"sourceRoot":""}